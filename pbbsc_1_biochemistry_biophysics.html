<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta id="viewport-meta" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>Ezi Nurse | Premium Nursing Education</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

<style>
    :root {
        --primary: #5e35b1;
        --primary-light: #7e57c2;
        --secondary: #0091ea;
        --accent: #ff4081;
        --success: #00c853;
        --bg-body: #f5f7fa;
        --bg-card: #ffffff;
        --text-main: #1e293b;
        --text-muted: #64748b;
        --danger: #ef4444;
        --radius-lg: 16px;
        --radius-md: 12px;
        --shadow-sm: 0 2px 8px rgba(0,0,0,0.05);
        --shadow-lg: 0 10px 25px rgba(94, 53, 177, 0.15);
        --grad-blue: linear-gradient(135deg, #42a5f5, #1976d2);
        --grad-orange: linear-gradient(135deg, #ffa726, #f57c00);
        --grad-pink: linear-gradient(135deg, #ec407a, #c2185b);
        --grad-green: linear-gradient(135deg, #66bb6a, #388e3c);
        --grad-purple: linear-gradient(135deg, #7e57c2, #512da8);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }
    
    html, body { height: 100%; width: 100%; overflow: hidden; background-color: var(--bg-body); color: var(--text-main); }
    body.zoom-mode { overflow: auto !important; }

    #app {
        width: 100%; max-width: 480px; margin: 0 auto;
        background: var(--bg-body); height: 100%; position: relative;
        display: flex; flex-direction: column;
        box-shadow: var(--shadow-lg); overflow: hidden;
        padding-top: env(safe-area-inset-top, 25px); 
    }

    .view { 
        flex: 1; overflow-y: auto; display: none; 
        padding-bottom: 90px;
        animation: fadeIn 0.25s ease-out; 
    }
    .view.active { display: block; }
    .view.full-screen { padding-bottom: 0; }
    
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .header {
        padding: 15px 20px;
        background: linear-gradient(to right, var(--primary), var(--primary-light));
        color: white;
        display: flex; align-items: center; justify-content: space-between;
        z-index: 20; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        flex-shrink: 0;
    }
    .header-title { font-weight: 700; font-size: 1.2rem; display: flex; align-items: center; gap: 8px; }
    .header-actions { display: flex; gap: 15px; align-items: center; }
    .icon-btn { background: none; border: none; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    .back-btn { margin-right: 10px; }

    .auth-container { 
        min-height: 100%; display: flex; flex-direction: column; 
        justify-content: center; padding: 30px; background: white;
        position: relative; overflow: hidden;
    }
    .auth-container::before {
        content: '';
        position: absolute; top: -80px; right: -80px;
        width: 220px; height: 220px; border-radius: 50%;
        background: linear-gradient(135deg, rgba(94,53,177,0.07), rgba(0,145,234,0.07));
        pointer-events: none;
    }
    .auth-container::after {
        content: '';
        position: absolute; bottom: -60px; left: -60px;
        width: 180px; height: 180px; border-radius: 50%;
        background: linear-gradient(135deg, rgba(255,64,129,0.06), rgba(94,53,177,0.06));
        pointer-events: none;
    }
    .auth-header { text-align: center; margin-bottom: 30px; }

    .brand-hero { display: flex; flex-direction: column; align-items: center; margin-bottom: 20px; }
    .brand-logo-text { display: flex; align-items: baseline; gap: 1px; font-family: 'Poppins', sans-serif; }
    .brand-ezi { font-size: 2.6rem; font-weight: 800; letter-spacing: -1px; background: linear-gradient(135deg, #5e35b1, #7e57c2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .brand-nurse { font-size: 2.6rem; font-weight: 800; letter-spacing: -1px; background: linear-gradient(135deg, #0091ea, #00b0ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .brand-tagline { font-size: 0.72rem; font-weight: 600; letter-spacing: 3px; text-transform: uppercase; background: linear-gradient(90deg, #7e57c2, #0091ea); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; color: transparent; margin-top: 2px; opacity: 0.85; }
    .brand-pill-row { display: flex; gap: 8px; margin-top: 10px; }
    .brand-pill { padding: 3px 10px; border-radius: 20px; font-size: 0.68rem; font-weight: 700; letter-spacing: 0.5px; }
    .brand-pill-purple { background: rgba(94,53,177,0.1); color: #5e35b1; }
    .brand-pill-blue   { background: rgba(0,145,234,0.1); color: #0091ea; }
    .brand-pill-pink   { background: rgba(255,64,129,0.1); color: #ff4081; }
    .brand-pill-green  { background: rgba(56,142,60,0.1); color: #388e3c; }

    .form-group { margin-bottom: 16px; }
    .form-label { display: block; margin-bottom: 6px; font-size: 0.85rem; font-weight: 600; color: var(--text-muted); }
    .form-input { width: 100%; padding: 14px 16px; border: 1px solid #e2e8f0; border-radius: var(--radius-md); font-size: 1rem; background: #f8fafc; transition: all 0.2s; font-family: 'Open Sans', sans-serif; }
    .form-input:focus { border-color: var(--primary); background: white; outline: none; box-shadow: 0 0 0 3px rgba(94, 53, 177, 0.1); }
    
    .btn { width: 100%; padding: 16px; border-radius: var(--radius-md); border: none; font-size: 1rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: transform 0.1s; }
    .btn:active { transform: scale(0.98); }
    .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 12px rgba(94, 53, 177, 0.3); }
    .btn-outline { background: white; border: 2px solid var(--primary); color: var(--primary); }
    .btn-ghost { background: transparent; color: var(--text-muted); font-size: 0.9rem; margin-top: 10px; }

    /* --- NETFLIX-STYLE SPLASH SCREEN --- */
    #splash-screen {
        position: fixed; inset: 0; z-index: 9999;
        background: #ffffff;
        display: flex; align-items: center; justify-content: center;
        overflow: hidden;
    }

    /* The flare overlay â€” mimics Netflix's sweep of light */
    #splash-screen::before {
        content: '';
        position: absolute;
        top: 50%; left: 50%;
        width: 8px; height: 120%;
        background: linear-gradient(to bottom,
            transparent 0%,
            rgba(255,255,255,0) 20%,
            rgba(180,150,255,0.55) 48%,
            rgba(255,255,255,0.95) 50%,
            rgba(100,180,255,0.55) 52%,
            rgba(255,255,255,0) 80%,
            transparent 100%
        );
        transform: translate(-50%, -50%) scaleX(0);
        transform-origin: center;
        animation: netflixFlare 3.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        pointer-events: none;
        z-index: 2;
    }

    /* Ambient glow blob behind logo */
    #splash-screen::after {
        content: '';
        position: absolute;
        top: 50%; left: 50%;
        width: 260px; height: 260px;
        border-radius: 50%;
        background: radial-gradient(circle,
            rgba(140, 100, 255, 0.18) 0%,
            rgba(0, 145, 234, 0.10) 50%,
            transparent 75%
        );
        transform: translate(-50%, -50%) scale(0);
        animation: netflixGlow 3.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        pointer-events: none;
        z-index: 1;
    }

    .splash-content {
        position: relative;
        z-index: 3;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
        width: 100%;
        animation: netflixLogo 3.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }

    .splash-logo {
        width: 62px; height: 62px;
        border-radius: 50%;
        object-fit: cover;
        filter: drop-shadow(0 0 0px rgba(94,53,177,0));
        animation: netflixLogoGlow 3.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }

    .splash-text-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .splash-brand-text {
        font-family: 'Poppins', sans-serif;
        font-size: 2.6rem;
        font-weight: 800;
        line-height: 1;
        letter-spacing: -0.5px;
        white-space: nowrap;
        display: flex;
        gap: 2px;
    }

    .sp-ezi {
        color: #5e35b1;
        display: inline-block;
        animation: netflixTextLeft 3.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }
    .sp-nurse {
        color: #0091ea;
        display: inline-block;
        animation: netflixTextRight 3.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
    }

    /* â”€â”€ Keyframes â”€â”€ */

    /* Logo: starts invisible + slightly large, snaps in at ~30%, holds, then fades with screen */
    @keyframes netflixLogo {
        0%   { opacity: 0; transform: scale(1.15); }
        28%  { opacity: 0; transform: scale(1.15); }
        38%  { opacity: 1; transform: scale(1.02); }
        55%  { opacity: 1; transform: scale(1); }
        85%  { opacity: 1; transform: scale(1); }
        100% { opacity: 0; transform: scale(0.92); }
    }

    /* Logo gets a purple-blue glow at peak, then fades */
    @keyframes netflixLogoGlow {
        0%,28% { filter: drop-shadow(0 0 0px rgba(94,53,177,0)); }
        50%    { filter: drop-shadow(0 0 18px rgba(94,53,177,0.7)) drop-shadow(0 0 8px rgba(0,145,234,0.5)); }
        85%    { filter: drop-shadow(0 0 8px rgba(94,53,177,0.3)); }
        100%   { filter: drop-shadow(0 0 0px rgba(94,53,177,0)); }
    }

    /* Flare line: thin vertical light sweep expanding sideways */
    @keyframes netflixFlare {
        0%,25% { transform: translate(-50%,-50%) scaleX(0); opacity: 0; }
        35%    { transform: translate(-50%,-50%) scaleX(1); opacity: 1; }
        50%    { transform: translate(-50%,-50%) scaleX(200); opacity: 0.6; }
        65%    { transform: translate(-50%,-50%) scaleX(400); opacity: 0; }
        100%   { transform: translate(-50%,-50%) scaleX(400); opacity: 0; }
    }

    /* Ambient glow blob grows then fades */
    @keyframes netflixGlow {
        0%,25% { transform: translate(-50%,-50%) scale(0); opacity: 0; }
        42%    { transform: translate(-50%,-50%) scale(1.1); opacity: 1; }
        70%    { transform: translate(-50%,-50%) scale(1.4); opacity: 0.4; }
        100%   { transform: translate(-50%,-50%) scale(1.6); opacity: 0; }
    }

    /* "Ezi" nudges slightly left as it appears, then settles */
    @keyframes netflixTextLeft {
        0%,30%  { opacity: 0; letter-spacing: 4px; }
        42%     { opacity: 1; letter-spacing: -0.5px; }
        85%     { opacity: 1; }
        100%    { opacity: 0; }
    }

    /* "Nurse" nudges slightly right */
    @keyframes netflixTextRight {
        0%,32%  { opacity: 0; letter-spacing: 4px; }
        44%     { opacity: 1; letter-spacing: -0.5px; }
        85%     { opacity: 1; }
        100%    { opacity: 0; }
    }

    .dashboard-hero { padding: 15px 20px 8px 20px; background: white; }
    .welcome-text { font-size: 1.5rem; font-weight: 700; color: var(--text-main); margin-bottom: 5px; }
    .welcome-sub { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 10px; }

    .slider-wrapper { position: relative; width: 100%; overflow: hidden; margin-bottom: 8px; border-radius: var(--radius-lg); }
    .slider-track { display: flex; transition: transform 0.4s ease; will-change: transform; }
    .slider-slide { min-width: 100%; height: 135px; overflow: hidden; border-radius: var(--radius-lg); flex-shrink: 0; }
    .slider-slide img { width: 100%; height: 100%; object-fit: cover; object-position: center; display: block; border-radius: var(--radius-lg); }
    .slider-dots { display: flex; justify-content: center; gap: 5px; margin-top: 6px; padding-bottom: 2px; }
    .slider-dot { width: 7px; height: 7px; border-radius: 50%; background: #d1d5db; transition: all 0.3s; cursor: pointer; }
    .slider-dot.active { background: var(--primary); width: 20px; border-radius: 4px; }

    .section-title { padding: 0 20px; margin-bottom: 15px; font-size: 1.1rem; font-weight: 700; color: var(--text-main); }
    .category-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 0 20px 20px 20px; }
    .cat-card { height: 110px; border-radius: var(--radius-lg); padding: 15px; display: flex; flex-direction: column; justify-content: space-between; color: white; cursor: pointer; position: relative; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: transform 0.2s; }
    .cat-card:active { transform: scale(0.97); }
    .cat-card h3 { font-size: 1.1rem; font-weight: 700; z-index: 2; }
    .cat-card .icon { font-size: 2rem; opacity: 0.3; position: absolute; right: 10px; bottom: 10px; z-index: 1; }
    .cat-arrow { align-self: flex-start; background: rgba(255,255,255,0.2); width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; }
    .bg-msc { background: var(--grad-purple); }
    .bg-bsc { background: var(--grad-orange); }
    .bg-pbbsc { background: var(--grad-blue); }
    .bg-gnm { background: var(--grad-pink); }
    .bg-dark { background: var(--text-main); }

    .list-container { padding: 20px; }
    .list-item { background: white; padding: 16px; border-radius: var(--radius-md); margin-bottom: 12px; display: flex; align-items: center; justify-content: space-between; box-shadow: var(--shadow-sm); border: 1px solid #f1f5f9; cursor: pointer; }
    .list-item:active { background-color: #f8fafc; }
    .list-info h4 { font-size: 1rem; color: var(--text-main); font-weight: 600; }
    .list-info p { font-size: 0.8rem; color: var(--text-muted); margin-top: 2px; }
    .list-icon { color: var(--primary); margin-right: 15px; }

    #view-iframe.view { padding: 0 !important; height: 100%; width: 100%; z-index: 50; position: relative; }
    .iframe-wrapper { width: 100%; height: 100%; transform-origin: 0 0; transition: transform 0.3s ease, width 0.3s ease; }
    iframe { width: 100%; height: 100%; border: none; display: block; background: #fff; }

    .watermark-strip { position: absolute; top: 50%; left: 50%; width: 200%; transform: translate(-50%, -50%) rotate(-45deg); z-index: 9999; pointer-events: none; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 900; color: rgba(0, 0, 0, 0.04); user-select: none; white-space: nowrap; letter-spacing: 6px; text-transform: uppercase; }

    .bottom-nav { position: absolute; bottom: 0; left: 0; width: 100%; height: 70px; background: white; border-top: 1px solid #e2e8f0; display: flex; justify-content: space-around; align-items: center; z-index: 40; padding-bottom: 10px; }
    .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; flex: 1; height: 100%; color: var(--text-muted); cursor: pointer; background: none; border: none; }
    .nav-item.active { color: var(--primary); }
    .nav-item span { font-size: 24px; margin-bottom: 4px; }
    .nav-item label { font-size: 0.7rem; font-weight: 600; }

    #fab-zoom { position: absolute; bottom: 30px; left: 20px; width: 50px; height: 50px; background-color: var(--text-main); border-radius: 50%; box-shadow: 0 4px 12px rgba(0,0,0,0.3); display: none; align-items: center; justify-content: center; color: white; cursor: pointer; z-index: 100; }

    .paywall-container { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 40px; background: white; min-height: 100%; }
    .price-wrapper { margin: 20px 0; }
    .price-original { text-decoration: line-through; color: var(--text-muted); font-size: 1.1rem; margin-right: 10px; }
    .price-discounted { color: var(--text-main); font-weight: 800; font-size: 2.2rem; }
    
    .modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 100; backdrop-filter: blur(4px); }
    .modal-card { background: white; width: 85%; padding: 24px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.2); text-align: center; }
    .hidden { display: none !important; }
    .password-wrapper { position: relative; width: 100%; }
    .toggle-password-btn { position: absolute; right: 12px; top: 12px; border: none; background: none; color: var(--text-muted); cursor: pointer; }
    .error-msg { color: var(--danger); font-size: 0.85rem; margin-top: 5px; text-align: left; }

    .hamburger-btn { background: none; border: none; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; margin-right: 10px; }
    .drawer-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 200; display: none; backdrop-filter: blur(2px); }
    .drawer-overlay.open { display: block; }
    .drawer { position: absolute; top: 0; left: -280px; width: 260px; height: 100%; background: white; z-index: 201; transition: left 0.3s ease; display: flex; flex-direction: column; box-shadow: 4px 0 20px rgba(0,0,0,0.15); }
    .drawer.open { left: 0; }
    .drawer-header { background: linear-gradient(to right, var(--primary), var(--primary-light)); padding: 30px 20px 20px 20px; color: white; }
    .drawer-header .d-name { font-size: 1.1rem; font-weight: 700; margin-top: 10px; }
    .drawer-header .d-email { font-size: 0.78rem; opacity: 0.85; margin-top: 3px; }
    .drawer-avatar { width: 48px; height: 48px; border-radius: 50%; background: rgba(255,255,255,0.25); display: flex; align-items: center; justify-content: center; }
    .drawer-body { flex: 1; padding: 15px 0; }
    .drawer-item { display: flex; align-items: center; gap: 14px; padding: 14px 20px; cursor: pointer; color: var(--text-main); font-size: 0.95rem; font-weight: 500; border: none; background: none; width: 100%; text-align: left; transition: background 0.15s; }
    .drawer-item:active { background: #f1f5f9; }
    .drawer-item.danger { color: var(--danger); }
    .drawer-item .d-icon { color: inherit; }
    .drawer-divider { height: 1px; background: #f1f5f9; margin: 8px 0; }

    .tc-row { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 14px; margin-top: 4px; }
    .tc-row input[type="checkbox"] { width: 18px; height: 18px; margin-top: 2px; flex-shrink: 0; accent-color: var(--primary); cursor: pointer; }
    .tc-row label { font-size: 0.85rem; color: var(--text-muted); line-height: 1.4; cursor: pointer; }
    .tc-row a { color: var(--primary); font-weight: 600; text-decoration: none; }

    /* ============================================
       DEMO VIEW STYLES
       ============================================ */
    #view-demo.view { padding-bottom: 20px; }

    .demo-hero {
        background: linear-gradient(135deg, var(--primary), var(--primary-light));
        padding: 28px 20px 36px 20px;
        color: white;
        position: relative;
        overflow: hidden;
    }
    .demo-hero::after {
        content: '';
        position: absolute; bottom: -20px; left: 0; right: 0;
        height: 40px; background: var(--bg-body);
        border-radius: 50% 50% 0 0 / 100% 100% 0 0;
    }
    .demo-subject-name {
        font-size: 1.3rem; font-weight: 700; margin-bottom: 4px; line-height: 1.3;
    }
    .demo-subject-meta {
        font-size: 0.82rem; opacity: 0.85; display: flex; align-items: center; gap: 6px;
    }
    .demo-badge {
        background: rgba(255,255,255,0.2); border-radius: 20px;
        padding: 2px 10px; font-size: 0.72rem; font-weight: 700; letter-spacing: 0.5px;
    }

    .demo-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 14px;
        padding: 30px 20px 20px 20px;
    }

    .demo-tile {
        background: white;
        border-radius: var(--radius-lg);
        padding: 20px 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        box-shadow: var(--shadow-sm);
        border: 1px solid #f1f5f9;
        cursor: pointer;
        transition: transform 0.18s, box-shadow 0.18s;
        text-align: center;
        position: relative;
        overflow: hidden;
    }
    .demo-tile:active { transform: scale(0.96); }
    .demo-tile:hover { box-shadow: 0 6px 20px rgba(94,53,177,0.13); transform: translateY(-2px); }

    .demo-tile-icon {
        width: 52px; height: 52px; border-radius: 14px;
        display: flex; align-items: center; justify-content: center;
        font-size: 24px; color: white;
        flex-shrink: 0;
    }
    .demo-tile-label {
        font-size: 0.85rem; font-weight: 700; color: var(--text-main); line-height: 1.2;
    }
    .demo-tile-sub {
        font-size: 0.72rem; color: var(--text-muted);
    }

    .demo-tile-video .demo-tile-icon { background: var(--grad-blue); }
    .demo-tile-lecture .demo-tile-icon { background: var(--grad-orange); }
    .demo-tile-notes .demo-tile-icon { background: var(--grad-green); }
    .demo-tile-quiz .demo-tile-icon { background: var(--grad-pink); }

    .demo-unlock-section {
        margin: 0 20px 24px 20px;
        background: white;
        border-radius: var(--radius-lg);
        padding: 18px 20px;
        box-shadow: var(--shadow-sm);
        border: 1px solid #f1f5f9;
    }
    .demo-unlock-price-row {
        display: flex; align-items: center; gap: 8px; margin-bottom: 14px;
    }
    .demo-unlock-price {
        display: flex; align-items: baseline; gap: 8px;
    }
    .demo-unlock-btn {
        width: 100%; padding: 15px; border-radius: var(--radius-md);
        border: none; font-size: 1rem; font-weight: 700; cursor: pointer;
        background: var(--primary); color: white;
        box-shadow: 0 4px 12px rgba(94,53,177,0.3);
        display: flex; align-items: center; justify-content: center; gap: 8px;
        transition: transform 0.1s;
    }
    .demo-unlock-btn:active { transform: scale(0.98); }

    .demo-tile-badge {
        position: absolute; top: 10px; right: 10px;
        font-size: 0.62rem; font-weight: 700; padding: 2px 7px;
        border-radius: 10px; background: rgba(94,53,177,0.1); color: var(--primary);
    }

    /* ============================================
       QUIZ MODAL STYLES
       ============================================ */
    #quiz-modal {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: var(--bg-body); z-index: 300;
        display: none; flex-direction: column;
        animation: fadeIn 0.25s ease-out;
    }
    #quiz-modal.open { display: flex; }

    .quiz-header {
        background: linear-gradient(to right, var(--primary), var(--primary-light));
        color: white; padding: 15px 20px;
        display: flex; align-items: center; gap: 12px;
        flex-shrink: 0;
    }
    .quiz-header h2 { font-size: 1.05rem; font-weight: 700; flex: 1; }

    .quiz-body { flex: 1; overflow-y: auto; padding: 20px; }

    .quiz-loading {
        display: flex; flex-direction: column; align-items: center;
        justify-content: center; gap: 16px; min-height: 200px;
    }
    .quiz-spinner {
        width: 44px; height: 44px; border-radius: 50%;
        border: 4px solid #e2e8f0; border-top-color: var(--primary);
        animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .quiz-question-card {
        background: white; border-radius: var(--radius-lg);
        padding: 20px; margin-bottom: 16px;
        box-shadow: var(--shadow-sm); border: 1px solid #f1f5f9;
    }
    .quiz-q-num {
        font-size: 0.72rem; font-weight: 700; color: var(--primary);
        text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px;
    }
    .quiz-q-text {
        font-size: 0.95rem; font-weight: 600; color: var(--text-main);
        margin-bottom: 14px; line-height: 1.5;
    }
    .quiz-option {
        padding: 12px 14px; border-radius: 10px;
        border: 1.5px solid #e2e8f0; margin-bottom: 8px;
        cursor: pointer; font-size: 0.88rem; color: var(--text-main);
        transition: all 0.15s; background: white;
        display: flex; align-items: center; gap: 10px;
    }
    .quiz-option:last-child { margin-bottom: 0; }
    .quiz-option:active { transform: scale(0.99); }
    .quiz-option.selected { border-color: var(--primary); background: rgba(94,53,177,0.06); color: var(--primary); font-weight: 600; }
    .quiz-option.correct { border-color: var(--success); background: rgba(0,200,83,0.08); color: #388e3c; font-weight: 600; }
    .quiz-option.wrong { border-color: var(--danger); background: rgba(239,68,68,0.08); color: var(--danger); font-weight: 600; }

    .quiz-opt-letter {
        width: 24px; height: 24px; border-radius: 50%;
        background: #f1f5f9; display: flex; align-items: center;
        justify-content: center; font-size: 0.78rem; font-weight: 700;
        flex-shrink: 0; transition: all 0.15s;
    }
    .quiz-option.selected .quiz-opt-letter { background: var(--primary); color: white; }
    .quiz-option.correct .quiz-opt-letter { background: var(--success); color: white; }
    .quiz-option.wrong .quiz-opt-letter { background: var(--danger); color: white; }

    .quiz-explanation {
        margin-top: 12px; padding: 12px 14px; border-radius: 10px;
        background: rgba(0,145,234,0.07); border-left: 3px solid var(--secondary);
        font-size: 0.83rem; color: var(--text-muted); line-height: 1.5;
        display: none;
    }
    .quiz-explanation.show { display: block; }
    .quiz-explanation strong { color: var(--secondary); }

    .quiz-score-bar {
        background: white; border-radius: var(--radius-lg);
        padding: 18px 20px; margin-bottom: 16px;
        box-shadow: var(--shadow-sm); border: 1px solid #f1f5f9;
        display: flex; align-items: center; justify-content: space-between;
    }
    .quiz-score-num { font-size: 1.8rem; font-weight: 800; color: var(--primary); }
    .quiz-score-label { font-size: 0.8rem; color: var(--text-muted); }
    .quiz-score-pct {
        font-size: 1rem; font-weight: 700; padding: 6px 14px;
        border-radius: 20px;
    }

    .quiz-submit-btn {
        width: 100%; padding: 14px; border-radius: var(--radius-md);
        border: none; font-size: 0.95rem; font-weight: 700;
        cursor: pointer; background: var(--primary); color: white;
        box-shadow: 0 4px 12px rgba(94,53,177,0.3);
        display: flex; align-items: center; justify-content: center; gap: 8px;
        margin-top: 8px;
    }
    .quiz-submit-btn:active { transform: scale(0.98); }
    .quiz-retry-btn {
        width: 100%; padding: 14px; border-radius: var(--radius-md);
        border: 2px solid var(--primary); font-size: 0.95rem; font-weight: 700;
        cursor: pointer; background: white; color: var(--primary);
        display: flex; align-items: center; justify-content: center; gap: 8px;
        margin-top: 10px;
    }

    .quiz-error-msg {
        text-align: center; color: var(--danger); font-size: 0.9rem;
        padding: 20px; line-height: 1.5;
    }
</style>
</head>
<body>

<!-- SPLASH SCREEN -->
<div id="splash-screen">
    <div class="splash-content">
        <img src="splash.png" alt="Logo" class="splash-logo">
        <div class="splash-text-container">
            <div class="splash-brand-text">
                <span class="sp-ezi">Ezi</span><span class="sp-nurse">Nurse</span>
            </div>
        </div>
    </div>
</div>
<audio id="splash-sound" src="https://www.myinstants.com/media/sounds/netflix-intro-sound.mp3" preload="auto"></audio>

<!-- AUTH LOADING -->
<div id="auth-loading" class="hidden">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading...</div>
</div>

<div id="app" style="visibility:hidden;">
    <div id="wm-diagonal" class="watermark-strip"></div>

    <header class="header" id="main-header" style="display:none;">
        <button class="icon-btn hamburger-btn" onclick="app.openDrawer()">
            <span class="material-icons-round">menu</span>
        </button>
        <button class="icon-btn back-btn" id="btn-back" onclick="app.goBack()">
            <span class="material-icons-round">arrow_back</span>
        </button>
        <div class="header-title" id="header-title">Ezi<span>Nurse</span></div>
        <div class="header-actions"></div>
    </header>

    <div id="drawer-overlay" class="drawer-overlay" onclick="app.closeDrawer()"></div>

    <div id="side-drawer" class="drawer">
        <div class="drawer-header">
            <div class="drawer-avatar"><span class="material-icons-round" style="font-size:28px;">person</span></div>
            <div class="d-name" id="drawer-name">My Account</div>
            <div class="d-email" id="drawer-email"></div>
        </div>
        <div class="drawer-body">
            <div class="drawer-divider"></div>
            <button class="drawer-item danger" onclick="app.deleteAccount()">
                <span class="material-icons-round d-icon">delete_forever</span>
                Delete Account
            </button>
        </div>
    </div>

    <div id="modal-delete" class="modal-overlay hidden">
        <div class="modal-card">
            <span class="material-icons-round" style="font-size:48px; color:var(--danger); margin-bottom:12px;">delete_forever</span>
            <h3 style="margin-bottom:10px;">Delete Account</h3>
            <p style="color:var(--text-muted); font-size:0.9rem; margin-bottom:20px; line-height:1.5;">Deletion request successful. You will get a confirmation email when your account is deleted.</p>
            <button class="btn btn-primary" onclick="app.closeDeleteModal()">OK</button>
        </div>
    </div>

    <div id="fab-zoom" onclick="app.toggleZoom()"><span class="material-icons-round">zoom_in</span></div>

    <!-- AUTH VIEW -->
    <div id="view-auth" class="view full-screen">
        <div class="auth-container">
            <div class="auth-header">
                <div class="brand-hero">
                    <div class="brand-logo-text">
                        <span class="brand-ezi">Ezi</span><span class="brand-nurse">Nurse</span>
                    </div>
                    <div class="brand-tagline">Premium Nursing Education</div>
                    <div class="brand-pill-row">
                        <span class="brand-pill brand-pill-purple">MSc</span>
                        <span class="brand-pill brand-pill-blue">BSc</span>
                        <span class="brand-pill brand-pill-green">PBBSc</span>
                        <span class="brand-pill brand-pill-pink">GNM</span>
                    </div>
                </div>
                <h1 style="font-size: 1.3rem; margin-bottom: 5px; font-weight: 700;">Welcome Back ðŸ‘‹</h1>
                <p style="color:var(--text-muted); font-size:0.9rem;">Sign in to continue your learning</p>
            </div>
            <div id="form-login">
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" id="login-email" class="form-input" placeholder="nurse@example.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="login-pass" class="form-input">
                        <button class="toggle-password-btn" onclick="app.togglePassword('login-pass', this)"><span class="material-icons-round">visibility</span></button>
                    </div>
                    <div style="text-align: right; margin-top:8px;">
                        <span style="font-size:0.85rem; color:var(--primary); font-weight:600; cursor:pointer;" onclick="app.navTo('view-reset')">Forgot Password?</span>
                    </div>
                </div>
                <div id="login-error" class="error-msg" style="text-align:center; margin-bottom:15px;"></div>
                <button id="btn-login-submit" class="btn btn-primary" onclick="app.login()">
                    <span>Login Securely</span>
                    <span class="material-icons-round" style="font-size:18px;">login</span>
                </button>
                <div style="text-align:center; margin: 20px 0; color:var(--text-muted); font-size:0.8rem;">OR</div>
                <button class="btn btn-outline" onclick="app.toggleAuthMode()">Create New Account</button>
            </div>
            <div id="form-signup" class="hidden">
                <div class="form-group"><label class="form-label">Full Name</label><input type="text" id="signup-name" class="form-input" placeholder="Nurse Joy"></div>
                <div class="form-group"><label class="form-label">Email</label><input type="email" id="signup-email" class="form-input"></div>
                <div class="form-group"><label class="form-label">Phone</label><input type="tel" id="signup-phone" class="form-input"></div>
                <div class="form-group"><label class="form-label">Password</label>
                    <div class="password-wrapper"><input type="password" id="signup-pass" class="form-input"><button class="toggle-password-btn" onclick="app.togglePassword('signup-pass', this)"><span class="material-icons-round">visibility</span></button></div>
                </div>
                <div id="signup-error" class="error-msg" style="text-align:center;"></div>
                <div class="tc-row">
                    <input type="checkbox" id="signup-tc">
                    <label for="signup-tc">I agree to the <a href="tc.html" target="_blank">Terms and Conditions</a></label>
                </div>
                <button id="btn-signup-submit" class="btn btn-primary" style="margin-top:5px;" onclick="app.signup()">Create Account</button>
                <button class="btn btn-ghost" onclick="app.toggleAuthMode()">Already have an account? Login</button>
            </div>
        </div>
    </div>

    <!-- RESET VIEW -->
    <div id="view-reset" class="view full-screen">
        <div class="auth-container">
            <h2 style="font-size:1.5rem; margin-bottom:10px;">Reset Password</h2>
            <div id="reset-step-1">
                <p class="form-label">Enter your email to receive a password reset link.</p>
                <input type="email" id="reset-email" class="form-input" style="margin-bottom:15px;">
                <div id="reset-error-1" class="error-msg"></div>
                <button id="btn-reset-req" class="btn btn-primary" onclick="app.requestResetCode()">Send Link</button>
                <button class="btn btn-ghost" onclick="app.navTo('view-auth', true)">Cancel</button>
            </div>
        </div>
    </div>

    <!-- DASHBOARD VIEW -->
    <div id="view-dashboard" class="view">
        <div class="dashboard-hero">
            <div class="welcome-text">Hello, <span id="user-name-display" style="color:var(--primary);">Nurse</span> ðŸ‘‹</div>
            <div class="welcome-sub">Let's start learning today.</div>
            <div class="slider-wrapper" id="hero-slider">
                <div class="slider-track" id="slider-track">
                    <div class="slider-slide"><img src="1.png" alt="Slide 1" onerror="this.style.background='linear-gradient(135deg,#7e57c2,#512da8)';this.alt='';"></div>
                    <div class="slider-slide"><img src="2.png" alt="Slide 2" onerror="this.style.background='linear-gradient(135deg,#ffa726,#f57c00)';this.alt='';"></div>
                    <div class="slider-slide"><img src="3.png" alt="Slide 3" onerror="this.style.background='linear-gradient(135deg,#42a5f5,#1976d2)';this.alt='';"></div>
                    <div class="slider-slide"><img src="4.png" alt="Slide 4" onerror="this.style.background='linear-gradient(135deg,#ec407a,#c2185b)';this.alt='';"></div>
                    <div class="slider-slide"><img src="5.png" alt="Slide 5" onerror="this.style.background='linear-gradient(135deg,#66bb6a,#388e3c)';this.alt='';"></div>
                    <div class="slider-slide"><img src="6.png" alt="Slide 6" onerror="this.style.background='linear-gradient(135deg,#26c6da,#00838f)';this.alt='';"></div>
                </div>
            </div>
            <div class="slider-dots" id="slider-dots">
                <div class="slider-dot active" onclick="sliderGoTo(0)"></div>
                <div class="slider-dot" onclick="sliderGoTo(1)"></div>
                <div class="slider-dot" onclick="sliderGoTo(2)"></div>
                <div class="slider-dot" onclick="sliderGoTo(3)"></div>
                <div class="slider-dot" onclick="sliderGoTo(4)"></div>
                <div class="slider-dot" onclick="sliderGoTo(5)"></div>
            </div>
        </div>
        <div class="section-title">What are you looking for?</div>
        <div class="category-grid">
            <div class="cat-card bg-msc" onclick="app.navToCourse('MSc')">
                <div class="cat-arrow"><span class="material-icons-round" style="font-size:14px;">arrow_forward</span></div>
                <h3>MSc<br>Nursing</h3>
                <span class="material-icons-round icon">psychology</span>
            </div>
            <div class="cat-card bg-bsc" onclick="app.navToCourse('BSc')">
                <div class="cat-arrow"><span class="material-icons-round" style="font-size:14px;">arrow_forward</span></div>
                <h3>BSc<br>Nursing</h3>
                <span class="material-icons-round icon">menu_book</span>
            </div>
            <div class="cat-card bg-pbbsc" onclick="app.navToCourse('PBBSc')">
                <div class="cat-arrow"><span class="material-icons-round" style="font-size:14px;">arrow_forward</span></div>
                <h3>PBBSc<br>Nursing</h3>
                <span class="material-icons-round icon">science</span>
            </div>
            <div class="cat-card bg-gnm" onclick="app.navToCourse('GNM')">
                <div class="cat-arrow"><span class="material-icons-round" style="font-size:14px;">arrow_forward</span></div>
                <h3>GNM<br>Nursing</h3>
                <span class="material-icons-round icon">healing</span>
            </div>
            <div class="cat-card bg-dark" onclick="app.navToCourse('EXAMS')">
                <div class="cat-arrow"><span class="material-icons-round" style="font-size:14px;">star</span></div>
                <h3>Competitive<br>Exams</h3>
                <span class="material-icons-round icon">quiz</span>
            </div>
        </div>
    </div>

    <!-- SUBMENU VIEW -->
    <div id="view-submenu" class="view">
        <div class="list-container" id="submenu-list"></div>
    </div>

    <!-- SUBJECTS VIEW -->
    <div id="view-subjects" class="view">
        <div class="list-container" id="subject-list"></div>
    </div>

    <!-- ============================================
         DEMO VIEW â€” shown before every subject
         ============================================ -->
    <div id="view-demo" class="view">
        <!-- Hero banner -->
        <div class="demo-hero">
            <div class="demo-badge" id="demo-badge">DEMO</div>
            <div class="demo-subject-name" id="demo-subject-name">Subject Name</div>
            <div class="demo-subject-meta" id="demo-subject-meta">
                <span class="material-icons-round" style="font-size:14px;">school</span>
                <span id="demo-subject-course">Course</span>
            </div>
        </div>

        <!-- Tiles rendered dynamically by JS (course-aware) -->
        <div class="demo-grid" id="demo-tile-grid"></div>

        <!-- Unlock Premium Button -->
        <div class="demo-unlock-section">
            <div class="demo-unlock-price-row">
                <span class="material-icons-round" style="color:var(--accent); font-size:20px;">lock</span>
                <div id="demo-unlock-price" class="demo-unlock-price"></div>
            </div>
            <button class="demo-unlock-btn" onclick="app.purchaseLockedContent()">
                <span class="material-icons-round">shopping_cart</span>
                Unlock Full Access
            </button>
        </div>
    </div>

    <!-- IFRAME VIEW (kept for content rendering) -->
    <div id="view-iframe" class="view full-screen"></div>

    <!-- PAYWALL VIEW -->
    <div id="view-paywall" class="view full-screen">
        <div class="paywall-container">
            <span class="material-icons-round" style="font-size:64px; color:var(--accent); margin-bottom:20px;">lock</span>
            <h2 style="font-size:1.5rem; margin-bottom:10px;">Unlock Premium</h2>
            <p style="color:var(--text-muted); margin-bottom:20px;">Get complete access to this course material and boost your preparation.</p>
            <div id="paywall-price-display" class="price-wrapper"></div>
            <button class="btn btn-primary" onclick="app.purchaseLockedContent()">
                <span>Unlock Now</span>
                <span class="material-icons-round">shopping_cart</span>
            </button>
            <button class="btn btn-ghost" onclick="app.goBack()">Maybe Later</button>
        </div>
    </div>

    <!-- BOTTOM NAV -->
    <nav id="bottom-nav" class="bottom-nav" style="display:none;">
        <button class="nav-item active" onclick="app.navTo('view-dashboard')">
            <span class="material-icons-round">home</span>
            <label>Home</label>
        </button>
        <button class="nav-item" onclick="app.logout()">
            <span class="material-icons-round">person</span>
            <label>Logout</label>
        </button>
    </nav>

    <!-- QUIZ â€” bottom sheet overlay -->
    <div class="qoverlay" id="qmodal">
        <div class="qscrim" onclick="app.closeQuiz()"></div>
        <div class="qpanel">
            <div class="qhead">
                <div class="qhead-top">
                    <div class="qtitle" id="qtitle">Demo Quiz</div>
                    <button class="qclose" onclick="app.closeQuiz()">âœ•</button>
                </div>
                <div class="qpips" id="qpips"></div>
            </div>
            <div class="qbody-scroll" id="qbody"></div>
        </div>
    </div>
</div>

<script>
var sliderCurrent = 0, sliderTotal = 6, sliderTimer = null;
function sliderGoTo(index) {
    sliderCurrent = index;
    document.getElementById('slider-track').style.transform = 'translateX(-' + (index * 100) + '%)';
    document.querySelectorAll('.slider-dot').forEach(function(d, i) { d.classList.toggle('active', i === index); });
}
function sliderNext() { sliderGoTo((sliderCurrent + 1) % sliderTotal); }
function startSliderAuto() { sliderTimer = setInterval(sliderNext, 3000); }
function stopSliderAuto() { clearInterval(sliderTimer); }
(function() {
    var startX = 0, el = document.getElementById('hero-slider');
    el.addEventListener('touchstart', function(e) { startX = e.touches[0].clientX; stopSliderAuto(); }, { passive: true });
    el.addEventListener('touchend', function(e) {
        var diff = startX - e.changedTouches[0].clientX;
        if (Math.abs(diff) > 40) { if (diff > 0) sliderGoTo((sliderCurrent+1)%sliderTotal); else sliderGoTo((sliderCurrent-1+sliderTotal)%sliderTotal); }
        startSliderAuto();
    }, { passive: true });
})();
startSliderAuto();

function getDeviceId() {
    let id = localStorage.getItem('ezinurse_device_id');
    if (!id) { id = crypto.randomUUID(); localStorage.setItem('ezinurse_device_id', id); }
    return id;
}

// SPLASH LOGIC
var splashDone = false;
var authResolved = false;
var pendingView = null;

function onSplashDone() {
    if (splashDone) return;
    splashDone = true;
    // Smooth fade out â€” the logo is already faded by CSS animation at 3.5s
    var splash = document.getElementById('splash-screen');
    splash.style.transition = 'opacity 0.4s ease';
    splash.style.opacity = '0';
    setTimeout(function() { splash.style.display = 'none'; }, 400);
    if (authResolved) { showApp(); }
    else { document.getElementById('auth-loading').classList.remove('hidden'); }
}

function onAuthResolved(viewId) {
    authResolved = true;
    pendingView = viewId;
    if (splashDone) showApp();
}

function showApp() {
    document.getElementById('auth-loading').classList.add('hidden');
    document.getElementById('app').style.visibility = 'visible';
    if (pendingView && window._realApp) { window._realApp.renderView(pendingView); }
}

if (sessionStorage.getItem('currentView') === 'view-iframe') {
    splashDone = true;
    document.getElementById('splash-screen').style.display = 'none';
    document.getElementById('auth-loading').classList.remove('hidden');
} else {
    // Play audio: try immediately, fallback on first user interaction
    var splashAudio = document.getElementById('splash-sound');
    function tryPlayAudio() {
        if (splashAudio) {
            splashAudio.volume = 1.0;
            splashAudio.play().catch(function() {
                // Autoplay blocked â€” play on first touch/click
                function playOnInteraction() {
                    splashAudio.play().catch(function(){});
                    document.removeEventListener('touchstart', playOnInteraction);
                    document.removeEventListener('click', playOnInteraction);
                }
                document.addEventListener('touchstart', playOnInteraction, { once: true });
                document.addEventListener('click', playOnInteraction, { once: true });
            });
        }
    }
    tryPlayAudio();
    setTimeout(onSplashDone, 3500);
}
</script>

<script>
window._realApp = null;
window._appQueue = [];
window.app = new Proxy({}, {
    get(_, prop) {
        return function(...args) {
            if (window._realApp && typeof window._realApp[prop] === 'function') return window._realApp[prop](...args);
            window._appQueue.push({ prop, args });
        };
    }
});
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, sendPasswordResetEmail, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyDVAJZaxBjcCjWUirUXnffZv5nmM5Th1No",
    authDomain: "my-login-app-54abd.firebaseapp.com",
    projectId: "my-login-app-54abd",
    storageBucket: "my-login-app-54abd.firebasestorage.app",
    messagingSenderId: "747689511082",
    appId: "1:747689511082:web:0815e12c1ada17a31ca8d3"
};

const fbApp = initializeApp(firebaseConfig);
const auth = getAuth(fbApp);
const db = getFirestore(fbApp);

const _realApp = {
    currentUser: null,
    lockedCourseKey: null,
    lockedCourseSection: null,
    zoomLevel: 1,
    permissions: {},

    // Demo state
    _demoSubject: null,
    _dq_answered: [],

    init: function() {
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                this.currentUser = user;
                this.updateWatermark();
                if (user.displayName) document.getElementById('user-name-display').textContent = user.displayName.split(' ')[0];
                await this.fetchUserPermissions(user.uid);
                if (this.currentUser) {
                    const savedView = sessionStorage.getItem('currentView');
                    const savedUrl = sessionStorage.getItem('currentUrl');
                    const savedTitle = sessionStorage.getItem('currentTitle') || 'Subject View';
                    if (savedView === 'view-iframe' && savedUrl) {
                        history.replaceState({ viewId: 'view-iframe', sourceUrl: savedUrl, title: savedTitle }, savedTitle, '#content');
                        this.openContent(savedUrl, savedTitle, true);
                        onAuthResolved('view-iframe');
                    } else {
                        history.replaceState({ viewId: 'view-dashboard' }, 'Dashboard', '#dashboard');
                        onAuthResolved('view-dashboard');
                    }
                }
            } else {
                this.currentUser = null;
                this.permissions = {};
                sessionStorage.clear();
                history.replaceState({ viewId: 'view-auth' }, 'Login', '#login');
                onAuthResolved('view-auth');
            }
        });

        window.addEventListener('message', (event) => {
            if (event.data && event.data.action === 'goBack') {
                sessionStorage.removeItem('currentView');
                sessionStorage.removeItem('currentUrl');
                window.history.back();
            }
        });

        window.addEventListener('popstate', (event) => {
            if (event.state && event.state.viewId) {
                if (event.state.viewId === 'view-dashboard') {
                    sessionStorage.removeItem('currentView');
                    sessionStorage.removeItem('currentUrl');
                }
                if (event.state.viewId === 'view-submenu') {
                    const c = event.state.course || this.lockedCourseKey;
                    if (c) { this.renderSubmenu(c); this.renderView('view-submenu'); }
                    else this.renderView('view-dashboard');
                } else if (event.state.viewId === 'view-subjects') {
                    const c = event.state.course || this.lockedCourseKey;
                    const s = event.state.section || this.lockedCourseSection;
                    if (c && s) { this.renderSubjectList(c, s); this.renderView('view-subjects'); }
                    else this.renderView('view-dashboard');
                } else if (event.state.viewId === 'view-demo') {
                    this.renderView('view-demo');
                } else if (event.state.viewId === 'view-iframe') {
                    if (event.state.sourceUrl) this.openContent(event.state.sourceUrl, event.state.title, true);
                    else this.renderView('view-dashboard');
                } else {
                    this.renderView(event.state.viewId);
                }
            } else {
                this.currentUser ? this.renderView('view-dashboard') : this.renderView('view-auth');
            }
        });
    },

    fetchUserPermissions: async function(uid) {
        try {
            const docRef = doc(db, "users", uid);
            const docSnap = await getDoc(docRef);
            if (docSnap.exists()) {
                const data = docSnap.data();
                const deviceId = getDeviceId();
                if (data.deviceId && data.deviceId !== deviceId) {
                    this.currentUser = null;
                    this.permissions = {};
                    await signOut(auth);
                    const errEl = document.getElementById('login-error');
                    if (errEl) errEl.textContent = 'âš ï¸ Your account is active on another device. Log out there first, then try again.';
                    return;
                }
                this.permissions = data.permissions || {};
                if (data.name) {
                    document.getElementById('user-name-display').textContent = data.name.split(' ')[0];
                    document.getElementById('drawer-name').textContent = data.name;
                }
            } else {
                await setDoc(doc(db, "users", uid), { email: this.currentUser.email, permissions: {} }, { merge: true });
            }
        } catch (e) { console.error("Error fetching permissions:", e); }
    },

    updateWatermark: function() {
        const email = this.currentUser ? this.currentUser.email : '';
        const strip = document.getElementById('wm-diagonal');
        if (email) { strip.textContent = (email + " â€¢ ").repeat(30); strip.style.display = 'flex'; }
        else { strip.style.display = 'none'; }
    },

    toggleZoom: function() {
        const wrapper = document.getElementById('iframe-wrapper');
        if (!wrapper) return;
        if (this.zoomLevel === 1) this.zoomLevel = 1.5;
        else if (this.zoomLevel === 1.5) this.zoomLevel = 2.0;
        else this.zoomLevel = 1;
        wrapper.style.transform = 'none';
        if (this.zoomLevel === 1) wrapper.style.width = '100%';
        if (this.zoomLevel === 1.5) wrapper.style.width = '150%';
        if (this.zoomLevel === 2.0) wrapper.style.width = '200%';
    },

    login: function() {
        const email = document.getElementById('login-email').value.trim();
        const pass = document.getElementById('login-pass').value.trim();
        const errorDiv = document.getElementById('login-error');
        const btn = document.getElementById('btn-login-submit');
        errorDiv.textContent = "";
        if (!email || !pass) { errorDiv.textContent = "Fill all fields"; return; }
        btn.innerHTML = '<span>Logging in...</span>'; btn.disabled = true;
        signInWithEmailAndPassword(auth, email, pass)
            .then(async (userCredential) => {
                const user = userCredential.user;
                const deviceId = getDeviceId();
                const userRef = doc(db, "users", user.uid);
                const userSnap = await getDoc(userRef);
                if (userSnap.exists()) {
                    const stored = userSnap.data().deviceId;
                    if (stored && stored !== deviceId) {
                        await signOut(auth);
                        errorDiv.textContent = 'âš ï¸ This account is active on another device. Please log out from that device first.';
                        btn.innerHTML = '<span>Login Securely</span><span class="material-icons-round" style="font-size:18px;">login</span>';
                        btn.disabled = false;
                        return;
                    }
                }
                await setDoc(userRef, { deviceId }, { merge: true });
            })
            .catch((error) => {
                const ec = error.code;
                if (ec === 'auth/invalid-credential' || ec === 'auth/user-not-found' || ec === 'auth/wrong-password') errorDiv.textContent = "Incorrect email or password.";
                else if (ec === 'auth/too-many-requests') errorDiv.textContent = "Too many failed attempts. Try again later.";
                else errorDiv.textContent = error.message;
                btn.innerHTML = '<span>Login Securely</span><span class="material-icons-round" style="font-size:18px;">login</span>';
                btn.disabled = false;
            });
    },

    signup: function() {
        const name = document.getElementById('signup-name').value.trim();
        const email = document.getElementById('signup-email').value.trim();
        const pass = document.getElementById('signup-pass').value.trim();
        const phone = document.getElementById('signup-phone').value.trim();
        const tc = document.getElementById('signup-tc').checked;
        const errorDiv = document.getElementById('signup-error');
        const btn = document.getElementById('btn-signup-submit');
        
        errorDiv.textContent = "";
        if (!name || !email || !pass || !phone) { errorDiv.textContent = "Fill all fields"; return; }
        if (!tc) { errorDiv.textContent = "Please accept the Terms and Conditions to continue."; return; }
        
        btn.textContent = "Creating..."; btn.disabled = true;
        
        createUserWithEmailAndPassword(auth, email, pass)
            .then(async (userCredential) => {
                const user = userCredential.user;
                const defaultPermissions = {
                    msc_first_year: false, msc_second_year: false,
                    bsc_first_semester: false, bsc_second_semester: false, bsc_third_semester: false,
                    bsc_fourth_semester: false, bsc_fifth_semester: false, bsc_sixth_semester: false,
                    bsc_seventh_semester: false, pbbsc_first_year: false, pbbsc_second_year: false,
                    gnm_first_year: false, gnm_second_year: false, gnm_third_year: false,
                    qp_bsc: false, qp_gnm: false, '3d_models': false,
                    exams_norcet: false, exams_esci: false, nursing_req: false,
                    comm_english: false, all_access: false
                };
                await setDoc(doc(db, "users", user.uid), { 
                    name, email, phone, createdAt: new Date(), permissions: defaultPermissions 
                });
                alert("Account Created!");
            })
            .catch((error) => { 
                errorDiv.textContent = error.message; 
                btn.textContent = "Create Account"; 
                btn.disabled = false; 
            });
    },

    requestResetCode: function() {
        const email = document.getElementById('reset-email').value.trim();
        const btn = document.getElementById('btn-reset-req');
        const err = document.getElementById('reset-error-1');
        err.textContent = "";
        if (!email) { err.textContent = "Enter email"; return; }
        btn.textContent = "Sending..."; btn.disabled = true;
        sendPasswordResetEmail(auth, email)
            .then(() => { alert("Password reset email sent! Check your inbox."); this.navTo('view-auth', true); })
            .catch((error) => { err.textContent = error.message; })
            .finally(() => { btn.textContent = "Send Link"; btn.disabled = false; });
    },

    toggleAuthMode: function() {
        const login = document.getElementById('form-login');
        const signup = document.getElementById('form-signup');
        if (login.classList.contains('hidden')) { signup.classList.add('hidden'); login.classList.remove('hidden'); }
        else { login.classList.add('hidden'); signup.classList.remove('hidden'); }
    },

    togglePassword: function(id, btn) {
        const el = document.getElementById(id);
        const icon = btn.querySelector('span');
        if (el.type === 'password') { el.type = 'text'; icon.textContent = 'visibility_off'; btn.style.color = 'var(--primary)'; }
        else { el.type = 'password'; icon.textContent = 'visibility'; btn.style.color = 'var(--text-muted)'; }
    },

    logout: function() {
        if (this.currentUser) {
            setDoc(doc(db, "users", this.currentUser.uid), { deviceId: null }, { merge: true })
                .finally(() => signOut(auth).catch((e) => console.error(e)));
        } else {
            signOut(auth).catch((e) => console.error(e));
        }
    },

    openDrawer: function() {
        const email = this.currentUser ? this.currentUser.email : '';
        const name = document.getElementById('user-name-display') ? document.getElementById('user-name-display').textContent : '';
        document.getElementById('drawer-name').textContent = name || 'My Account';
        document.getElementById('drawer-email').textContent = email;
        document.getElementById('side-drawer').classList.add('open');
        document.getElementById('drawer-overlay').classList.add('open');
    },

    closeDrawer: function() {
        document.getElementById('side-drawer').classList.remove('open');
        document.getElementById('drawer-overlay').classList.remove('open');
    },

    deleteAccount: function() {
        this.closeDrawer();
        document.getElementById('modal-delete').classList.remove('hidden');
    },

    closeDeleteModal: function() {
        document.getElementById('modal-delete').classList.add('hidden');
    },

    navTo: function(viewId, isRoot = false, stateData = {}) {
        const state = { viewId, ...stateData };
        if (isRoot) history.replaceState(state, null, `#${viewId.replace('view-', '')}`);
        else history.pushState(state, null, `#${viewId.replace('view-', '')}`);
        this.renderView(viewId);
    },

    renderView: function(viewId) {
        const iframeContainer = document.getElementById('view-iframe');
        if (viewId !== 'view-iframe' && iframeContainer) iframeContainer.innerHTML = '';
        const fab = document.getElementById('fab-zoom');
        const header = document.getElementById('main-header');
        const bottomNav = document.getElementById('bottom-nav');
        fab.style.display = (viewId === 'view-iframe') ? 'flex' : 'none';
        bottomNav.style.display = (viewId === 'view-dashboard') ? 'flex' : 'none';
        const isAuth = viewId === 'view-auth' || viewId === 'view-reset';
        const isDash = viewId === 'view-dashboard';
        header.style.display = isAuth ? 'none' : 'flex';
        const backBtn = document.getElementById('btn-back');
        const hamburgerBtn = document.querySelector('.hamburger-btn');
        if (isDash) { if (backBtn) backBtn.style.display = 'none'; if (hamburgerBtn) hamburgerBtn.style.display = 'flex'; }
        else { if (backBtn) backBtn.style.display = 'flex'; if (hamburgerBtn) hamburgerBtn.style.display = 'none'; }
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        const target = document.getElementById(viewId);
        if (target) target.classList.add('active');
    },

    goBack: function() { window.history.back(); },
    navToCourse: function(key) { this.renderSubmenu(key); this.navTo('view-submenu', false, { course: key }); },

    renderSubmenu: function(key) {
        const list = document.getElementById('submenu-list');
        list.innerHTML = '';
        document.getElementById('header-title').innerHTML = `<span>${key}</span> Details`;
        Object.keys(COURSES[key]).forEach(sec => {
            const item = document.createElement('div');
            item.className = 'list-item';
            item.innerHTML = `<div style="display:flex;align-items:center;"><span class="material-icons-round list-icon">folder_open</span><div class="list-info"><h4>${sec}</h4></div></div><span class="material-icons-round" style="color:#ccc;">chevron_right</span>`;
            item.onclick = () => { this.checkAccessAndOpen(key, sec); };
            list.appendChild(item);
        });
    },

    checkAccessAndOpen: function(course, section) {
        this.lockedCourseKey = course; this.lockedCourseSection = section;
        const pKey = getPermissionKey(course, section);
        if (this.permissions && (this.permissions[pKey] === true || this.permissions['all_access'] === true)) {
            // Has access â€” go straight to subject list
            this.openSubjectList(course, section);
        } else {
            // No access â€” show Demo screen instead of paywall
            this.openSectionDemo(course, section);
        }
    },

    // Courses that have NO video content
    _noVideo: ['MSc'],

    // Demo screen shown for ALL locked course sections (replaces old paywall view)
    openSectionDemo: function(course, section) {
        this._demoSubject = { label: section, link: null, course, section };
        document.getElementById('demo-subject-name').textContent = course + ' Nursing â€” ' + section;
        document.getElementById('demo-subject-course').textContent = 'Preview before you buy';
        document.getElementById('demo-badge').textContent = 'DEMO';
        document.getElementById('header-title').textContent = section;
        this.renderDemoPaywallInfo(course, section);
        this.renderDemoTiles(course);
        this.navTo('view-demo', false, { course, section });
    },

    renderDemoTiles: function(course) {
        const showVideo = !this._noVideo.includes(course);
        const grid = document.getElementById('demo-tile-grid');
        if (!grid) return;
        let html = '';
        if (showVideo) {
            html += `<div class="demo-tile demo-tile-video" onclick="app.demoOpenVideo()">
                <div class="demo-tile-icon"><span class="material-icons-round">play_circle_filled</span></div>
                <div><div class="demo-tile-label">Video Lecture</div><div class="demo-tile-sub">Watch &amp; learn</div></div>
            </div>`;
        }
        html += `<div class="demo-tile demo-tile-lecture" onclick="app.demoOpenLectureNote()">
            <div class="demo-tile-icon"><span class="material-icons-round">description</span></div>
            <div><div class="demo-tile-label">Lecture Note</div><div class="demo-tile-sub">Quick summary</div></div>
        </div>
        <div class="demo-tile demo-tile-notes" onclick="app.demoOpenDetailedNotes()">
            <div class="demo-tile-icon"><span class="material-icons-round">menu_book</span></div>
            <div><div class="demo-tile-label">Detailed Notes</div><div class="demo-tile-sub">In-depth study</div></div>
        </div>
        <div class="demo-tile demo-tile-quiz" onclick="app.demoOpenQuiz()">
            <div class="demo-tile-icon"><span class="material-icons-round">quiz</span></div>
            <div><div class="demo-tile-label">Quiz</div><div class="demo-tile-sub">Test yourself</div></div>
            <div class="demo-tile-badge">AI</div>
        </div>`;
        grid.innerHTML = html;
    },

    openSubjectList: function(course, section) { this.renderSubjectList(course, section); this.navTo('view-subjects', false, { course, section }); },

    renderSubjectList: function(course, section) {
        const list = document.getElementById('subject-list');
        list.innerHTML = '';
        document.getElementById('header-title').textContent = section;
        const subjects = COURSES[course][section];
        subjects.forEach(sub => {
            const item = document.createElement('div');
            item.className = 'list-item';
            item.innerHTML = `<div style="display:flex;align-items:center;"><span class="material-icons-round list-icon">article</span><div class="list-info"><h4>${sub.label.replace(/<[^>]*>?/gm, '')}</h4></div></div><span class="material-icons-round" style="color:#ccc;">chevron_right</span>`;
            item.onclick = () => { this.openContent(sub.link, sub.label.replace(/<[^>]*>?/gm, '')); };
            list.appendChild(item);
        });
    },

    renderDemoPaywallInfo: function(course, section) {
        const el = document.getElementById('demo-unlock-price');
        if (!el) return;
        let html = '';
        if (course === 'BSc') html = `<span class="price-original">â‚¹12,000</span><span class="price-discounted">â‚¹5,999</span>`;
        else if (course === 'GNM') html = `<span class="price-original">â‚¹14,000</span><span class="price-discounted">â‚¹5,800</span>`;
        else if (course === 'MSc') html = `<span class="price-original">â‚¹10,000</span><span class="price-discounted">â‚¹4,999</span>`;
        else if (course === 'PBBSc') html = `<span class="price-original">â‚¹10,000</span><span class="price-discounted">â‚¹4,999</span>`;
        else html = `<span class="price-discounted">Buy Now</span>`;
        el.innerHTML = html;
    },

    demoOpenVideo: function() {
        if (!this._demoSubject) return;
        const key = this._demoSubject.link;
        const url = (DEMO_URLS[key] && DEMO_URLS[key].video) || 'about:blank';
        this.openContent(url, 'Video Demo â€“ ' + this._demoSubject.label.replace(/<[^>]*>?/gm, ''));
    },

    demoOpenLectureNote: function() {
        if (!this._demoSubject) return;
        const key = this._demoSubject.link;
        const url = (DEMO_URLS[key] && DEMO_URLS[key].lecture) || 'about:blank';
        this.openContent(url, 'Lecture Note Demo â€“ ' + this._demoSubject.label.replace(/<[^>]*>?/gm, ''));
    },

    demoOpenDetailedNotes: function() {
        if (!this._demoSubject) return;
        const key = this._demoSubject.link;
        const url = (DEMO_URLS[key] && DEMO_URLS[key].detailed) || 'about:blank';
        this.openContent(url, 'Detailed Notes Demo â€“ ' + this._demoSubject.label.replace(/<[^>]*>?/gm, ''));
    },

    // ============================================
    // QUIZ
    // ============================================
    demoOpenQuiz: function() {
        if (!this._demoSubject) return;
        const course = this._demoSubject.course;
        const section = this._demoSubject.section;
        const key = course + '_' + section;
        const qs = DEMO_QUIZ[key] || DEMO_QUIZ[course] || DEMO_QUIZ['default'];
        const title = course + ' Â· ' + section + ' â€” Demo Quiz';

        this._dq_answered = new Array(qs.length).fill(null);

        document.getElementById('qtitle').textContent = title;
        document.getElementById('qpips').innerHTML = qs.map((_,i) =>
            `<div class="qpip" id="dqpip${i}"></div>`).join('');

        let html = `<div class="qscore-banner" id="dqscore">
            <div><div class="qscore-num" id="dqsnum">â€”</div><div class="qscore-sub">Score</div></div>
            <div class="qscore-msg" id="dqsmsg"></div>
        </div>`;
        qs.forEach((q, qi) => {
            html += `<div class="qitem" id="dqi${qi}">
                <div class="qlbl">Question ${qi+1} of ${qs.length}</div>
                <div class="qtext">${q.q}</div>
                <div class="qopts">${q.o.map((opt, oi) =>
                    `<button class="qopt" id="dqopt${qi}_${oi}" onclick="app._dqAns(${qi},${oi},${q.a})">
                        <span class="qltr">${['A','B','C','D'][oi]}</span>${opt}
                    </button>`).join('')}
                </div>
            </div>`;
        });
        document.getElementById('qbody').innerHTML = html;
        document.getElementById('qmodal').classList.add('open');
    },

    _dqAns: function(qi, oi, correct) {
        if (!this._dq_answered || this._dq_answered[qi] !== null) return;
        this._dq_answered[qi] = oi;
        const course = this._demoSubject.course;
        const section = this._demoSubject.section;
        const qs = DEMO_QUIZ[course + '_' + section] || DEMO_QUIZ[course] || DEMO_QUIZ['default'];

        const opts = document.querySelectorAll(`#dqi${qi} .qopt`);
        opts.forEach(b => b.classList.add('lock'));
        opts[correct].classList.add('cor');
        if (oi !== correct) opts[oi].classList.add('wrg');
        const pip = document.getElementById('dqpip' + qi);
        if (pip) { pip.classList.add('ans', oi === correct ? 'cor' : 'wrg'); }

        if (this._dq_answered.every(a => a !== null)) {
            const score = this._dq_answered.filter((a, i) => a === qs[i].a).length;
            const total = qs.length;
            const pct = Math.round(score / total * 100);
            const msgs = ['ðŸ“š Keep Studying!', 'ðŸ‘ Good Effort!', 'ðŸŽ‰ Well Done!', 'ðŸ† Perfect!'];
            const mi = pct < 50 ? 0 : pct < 70 ? 1 : pct < 100 ? 2 : 3;
            document.getElementById('dqsnum').textContent = score + '/' + total;
            document.getElementById('dqsmsg').textContent = msgs[mi];
            const sc = document.getElementById('dqscore');
            if (sc) { sc.classList.add('show'); sc.scrollIntoView({ behavior: 'smooth', block: 'start' }); }
        }
    },

    closeQuiz: function() {
        document.getElementById('qmodal').classList.remove('open');
    },

    // ============================================
    // CONTENT OPENING (unchanged)
    // ============================================
    openContent: function(url, title, fromHistory = false) {
        sessionStorage.setItem('currentView', 'view-iframe');
        sessionStorage.setItem('currentUrl', url);
        sessionStorage.setItem('currentTitle', title);

        const container = document.getElementById('view-iframe');
        if (!fromHistory) this.navTo('view-iframe', false, { sourceUrl: url, title });
        else this.renderView('view-iframe');
        const wrapper = document.createElement('div');
        wrapper.id = 'iframe-wrapper'; wrapper.className = 'iframe-wrapper';
        const iframe = document.createElement('iframe');
        iframe.id = "content-frame"; iframe.src = url;
        wrapper.appendChild(iframe);
        container.innerHTML = ''; container.appendChild(wrapper);
        this.zoomLevel = 1;
    },

    renderPaywallInfo: function(course, section) {
        const display = document.getElementById('paywall-price-display');
        let html = '';
        if (course === 'BSc') html = `<div><span class="price-original">â‚¹12,000</span><span class="price-discounted">â‚¹5,999</span></div>`;
        else if (course === 'GNM') html = `<div><span class="price-original">â‚¹14,000</span><span class="price-discounted">â‚¹5,800</span></div>`;
        display.innerHTML = html;
    },

    purchaseLockedContent: function() {
        const course = this.lockedCourseKey;
        const section = this.lockedCourseSection || 'Systems';
        const discountKey = `${course}_${section}_D`;
        const fullKey = `${course}_${section}_F`;
        let url = PAYMENT_LINKS[discountKey] || PAYMENT_LINKS[fullKey] || `https://www.razorpay.com/fallback`;
        window.open(url, '_blank');
    }
};

window._realApp = _realApp;
if (window._appQueue && window._appQueue.length) {
    window._appQueue.forEach(({ prop, args }) => { if (typeof _realApp[prop] === 'function') _realApp[prop](...args); });
    window._appQueue = [];
}
_realApp.init();
</script>

<script>
const PAYMENT_LINKS = {
    'GNM_Third Year_D':'https://rzp.io/rzp/tx1GzgB0','GNM_Second Year_D':'https://rzp.io/rzp/7ZEYqAR','GNM_First Year_D':'https://rzp.io/rzp/m7pEmVy5',
    'GNM_Third Year_F':'https://rzp.io/rzp/abNPOlM','GNM_Second Year_F':'https://rzp.io/rzp/7uQDIiN','GNM_First Year_F':'https://rzp.io/rzp/lVAKDci',
    'BSc_Semester 7_D':'https://rzp.io/rzp/5brZ609','BSc_Semester 6_D':'https://rzp.io/rzp/MyOzNDH3','BSc_Semester 5_D':'https://rzp.io/rzp/6Pyoc2KG',
    'BSc_Semester 4_D':'https://rzp.io/rzp/XYCluxgu','BSc_Semester 3_D':'https://rzp.io/rzp/vD6slz2','BSc_Semester 2_D':'https://rzp.io/rzp/IdW8fls',
    'BSc_Semester 1_D':'https://rzp.io/rzp/zrR68xJd','BSc_Semester 7_F':'https://rzp.io/rzp/9v1ESD8','BSc_Semester 6_F':'https://rzp.io/rzp/XAUmBAb',
    'BSc_Semester 5_F':'https://rzp.io/rzp/f3ckmawE','BSc_Semester 4_F':'https://rzp.io/rzp/0xomOEkm','BSc_Semester 3_F':'https://rzp.io/rzp/XoiqWOK',
    'BSc_Semester 2_F':'https://rzp.io/rzp/xn9Spct','BSc_Semester 1_F':'https://rzp.io/rzp/OepEc2wZ','PBBSc_Second Year_D':'https://rzp.io/rzp/O7QSNXOv',
    'PBBSc_First Year_D':'https://rzp.io/rzp/TdjmSoy','PBBSc_Second Year_F':'https://rzp.io/rzp/SG5tGnXT','PBBSc_First Year_F':'https://rzp.io/rzp/2QOTgbD',
    'MSc_Second Year_F':'https://rzp.io/rzp/Hpr9NDg','MSc_First Year_F':'https://rzp.io/rzp/SGdmSPd','3D_Systems_F':'https://rzp.io/rzp/Xnrnrxe',
    'EXAMS_NORCET_F':'https://rzp.io/l/dummy-norcet-english','EXAMS_ESCI_F':'https://rzp.io/l/dummy-esci','REQ_Documents_F':'https://rzp.io/l/dummy-nursing-req',
    'COMM_Basics_F':'https://rzp.io/l/dummy-comm-eng'
};

function getPermissionKey(course, section) {
    if (course === '3D') return '3d_models';
    if (course === 'REQ') return 'nursing_req';
    if (course === 'COMM') return 'comm_english';
    if (course === 'EXAMS') { if(section.includes('NORCET')) return 'exams_norcet'; if(section.includes('ESCI')) return 'exams_esci'; }
    const c = course.toLowerCase();
    if (section.includes('Semester')) {
        const num = section.split(' ')[1];
        const map = {'1':'first','2':'second','3':'third','4':'fourth','5':'fifth','6':'sixth','7':'seventh'};
        return `${c}_${map[num]}_semester`;
    }
    return `${c}_${section.toLowerCase().replace(' ', '_')}`;
}

const COURSES = {
    'MSc': {
        'First Year': [
            { label: 'Advanced Nursing Practice', link: 'msc_1_advanced_nursing_practice.html' },
            { label: 'Nursing Education', link: 'msc_1_nursing_education.html' },
            { label: 'Child Health Nursing', link: 'msc_1_child_health_nursing.html' },
            { label: 'Community Health Nursing', link: 'msc_1_community_health_nursing.html' },
            { label: 'Medical Surgical Nursing', link: 'msc_1_medical_surgical_nursing.html' },
            { label: 'Mental Health Nursing', link: 'msc_1_mental_health_nursing.html' },
            { label: 'Nursing Research & Stats', link: 'msc_1_nursing_research_and_statistics.html' },
            { label: 'OBG Nursing', link: 'msc_1_obgyn_nursing.html' },
            { label: '<span style="color: #ef4444;">Previous Year Question Papers</span>', link: 'msc1qp.html' }
        ],
        'Second Year': [
            { label: 'Child Health Nursing', link: 'msc_2_child_health_nursing.html' },
            { label: 'Community Health Nursing', link: 'msc_2_community_health_nursing.html' },
            { label: 'OBG Nursing', link: 'msc_2_obgyn_nursing.html' },
            { label: 'Nursing Management', link: 'msc_2_nursing_management.html' },
            { label: 'Mental Health Nursing', link: 'msc_2_mental_health_nursing.html' },
            { label: 'Medical Surgical Nursing', link: 'msc_2_medical_surgical_nursing.html' },
            { label: '<span style="color: #ef4444;">Previous Year Question Papers</span>', link: 'msc2qp.html' }
        ]
    },
    'BSc': {
        'Semester 1': [{ label: 'Applied Sociology', link: 'bsc_1_applied_sociology.html' },{ label: 'Applied Psychology', link: 'bsc_1_applied_psychology.html' },{ label: 'Applied Physiology', link: 'bsc_1_applied_physiology.html' },{ label: 'Applied Anatomy', link: 'bsc_1_applied_anatomy.html' },{ label: 'Nursing Foundation', link: 'bsc_1_nursing_foundation.html' },{ label: 'QP', link: 'bsc1qp.html' }],
        'Semester 2': [{ label: 'Applied Nutrition', link: 'bsc_2_applied_nutrition.html' },{ label: 'Applied Biochemistry', link: 'bsc_2_applied_biochemistry.html' },{ label: 'Nursing Foundation', link: 'bsc_2_nursing_foundation.html' },{ label: 'QP', link: 'bsc2qp.html' }],
        'Semester 3': [{ label: 'Pharmacology', link: 'bsc_3_pharmacology.html' },{ label: 'Pathology', link: 'bsc_3_pathology.html' },{ label: 'Microbiology', link: 'bsc_3_applied_microbiology.html' },{ label: 'Adult Health Nursing', link: 'bsc_3_adult_health_nursing.html' },{ label: 'QP', link: 'bsc3qp.html' }],
        'Semester 4': [{ label: 'Pharmacology II', link: 'bsc_4_pharmacology.html' },{ label: 'Pathology II', link: 'bsc_4_pathology.html' },{ label: 'Adult Health II', link: 'bsc_4_adult_health_nursing.html' },{ label: 'Professionalism', link: 'bsc_4_professionalism.html' },{ label: 'Genetics', link: 'bsc_4_genetics.html' },{ label: 'QP', link: 'bsc4qp.html' }],
        'Semester 5': [{ label: 'Forensic Nursing', link: 'bsc_5_forensic_nursing_indian_law.html' },{ label: 'Education', link: 'bsc_5_nursing_education.html' },{ label: 'Community Health', link: 'bsc_5_community_health_nursing.html' },{ label: 'Mental Health', link: 'bsc_5_mental_health_nursing.html' },{ label: 'Child Health', link: 'bsc_5_child_health_nursing.html' },{ label: 'QP', link: 'bsc5qp.html' }],
        'Semester 6': [{ label: 'Child Health II', link: 'bsc_6_child_health_nursing.html' },{ label: 'Mental Health II', link: 'bsc_6_mental_health_nursing.html' },{ label: 'Midwifery', link: 'bsc_6_midwifery_obgyn.html' },{ label: 'Management', link: 'bsc_6_nursing_management_leadership.html' },{ label: 'QP', link: 'bsc6qp.html' }],
        'Semester 7': [{ label: 'Community Health II', link: 'bsc_7_community_health_nursing.html' },{ label: 'Research', link: 'bsc_7_nursing_research_statistics.html' },{ label: 'Midwifery II', link: 'bsc_7_midwifery_obgyn.html' },{ label: 'QP', link: 'bsc7qp.html' }]
    },
    'PBBSc': {
        'First Year': [{ label: 'Medical Surgical', link: 'pbbsc_1_medical_surgical_nursing.html' },{ label: 'Child Health', link: 'pbbsc_1_child_health_nursing.html' },{ label: 'Microbiology', link: 'pbbsc_1_microbiology.html' },{ label: 'Biochem/Biophys', link: 'pbbsc_1_biochemistry_biophysics.html' },{ label: 'Nutrition', link: 'pbbsc_1_nutrition_dietetics.html' },{ label: 'Foundation', link: 'pbbsc_1_nursing_foundation.html' },{ label: 'Maternal', link: 'pbbsc_1_maternal_nursing.html' },{ label: 'Psychology', link: 'pbbsc_1_psychology.html' },{ label: 'QP', link: 'pbbsc1qp.html' },{ label: 'Live class', link: 'pbbsc1live.html' }],
        'Second Year': [{ label: 'Administration', link: 'pbbsc_2_nursing_service_administration.html' },{ label: 'Mental Health', link: 'pbbsc_2_mental_health_nursing.html' },{ label: 'Education', link: 'pbbsc_2_nursing_education.html' },{ label: 'Community Health', link: 'pbbsc_2_community_health_nursing.html' },{ label: 'Sociology', link: 'pbbsc_2_sociology.html' },{ label: 'QP', link: 'pbbsc2qp.html' }]
    },
    'GNM': {
        'First Year': [{ label: 'Nutrition', link: 'gnm_1_nutrition.html' },{ label: 'Health Ed', link: 'gnm_1_health_education.html' },{ label: 'Env Hygiene', link: 'gnm_1_environmental_hygiene.html' },{ label: 'Community Health', link: 'gnm_1_community_health_nursing.html' },{ label: 'First Aid', link: 'gnm_1_first_aid.html' },{ label: 'Fundamentals', link: 'gnm_1_fundamentals_of_nursing.html' },{ label: 'Sociology', link: 'gnm_1_sociology.html' },{ label: 'Psychology', link: 'gnm_1_psychology.html' },{ label: 'Microbiology', link: 'gnm_1_microbiology.html' },{ label: 'Anatomy', link: 'gnm_1_anatomy_physiology.html' },{ label: 'QP', link: 'gnm1qp.html' }],
        'Second Year': [{ label: 'MedSurg I', link: 'gnm_2_medical_surgical_nursing.html' },{ label: 'Mental Health', link: 'gnm_2_mental_health_nursing.html' },{ label: 'MedSurg II', link: 'gnm_2_medical_surgical_nursing_two.html' },{ label: 'Child Health', link: 'gnm_2_child_health_nursing.html' },{ label: 'QP', link: 'gnm2qp.html' }],
        'Third Year': [{ label: 'Community Health II', link: 'gnm_3_community_health_nursing.html' },{ label: 'Midwifery', link: 'gnm_3_midwifery.html' },{ label: 'Gynecology', link: 'gnm_3_gynecology.html' },{ label: 'QP', link: 'gnm3qp.html' }]
    },
    '3D': { 'Systems': [{ label: 'Interactive 3D Models', link: '3dmodels.html' }] },
    'EXAMS': { 'NORCET': [{ label: 'NORCET 8 (English)', link: 'norcetenglish.html' },{ label: 'NORCET (Hindi)', link: 'norcethindi.html' }], 'ESCI': [{ label: 'ESCI Exclusive Q&A', link: 'esci.html' }] },
    'REQ': { 'Documents': [{ label: 'Nursing Requirements', link: 'nursingrequirements.html' }] },
    'COMM': { 'Basics': [{ label: 'Communicative English', link: 'communicativeenglish.html' }] }
};

// ============================================================
// DEMO_URLS â€” keyed by the subject's `link` filename
// Each entry has: video, lecture, detailed
// Replace 'about:blank' with real URLs when ready
// ============================================================
const DEMO_URLS = {
    // MSc First Year
    'msc_1_advanced_nursing_practice.html':      { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_1_nursing_education.html':              { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_1_child_health_nursing.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_1_community_health_nursing.html':       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_1_medical_surgical_nursing.html':       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_1_mental_health_nursing.html':          { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_1_nursing_research_and_statistics.html':{ video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_1_obgyn_nursing.html':                  { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc1qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // MSc Second Year
    'msc_2_child_health_nursing.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_2_community_health_nursing.html':       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_2_obgyn_nursing.html':                  { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_2_nursing_management.html':             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_2_mental_health_nursing.html':          { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc_2_medical_surgical_nursing.html':       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'msc2qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // BSc Semester 1
    'bsc_1_applied_sociology.html':              { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_1_applied_psychology.html':             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_1_applied_physiology.html':             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_1_applied_anatomy.html':                { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_1_nursing_foundation.html':             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc1qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // BSc Semester 2
    'bsc_2_applied_nutrition.html':              { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_2_applied_biochemistry.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_2_nursing_foundation.html':             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc2qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // BSc Semester 3
    'bsc_3_pharmacology.html':                   { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_3_pathology.html':                      { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_3_applied_microbiology.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_3_adult_health_nursing.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc3qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // BSc Semester 4
    'bsc_4_pharmacology.html':                   { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_4_pathology.html':                      { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_4_adult_health_nursing.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_4_professionalism.html':                { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_4_genetics.html':                       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc4qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // BSc Semester 5
    'bsc_5_forensic_nursing_indian_law.html':    { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_5_nursing_education.html':              { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_5_community_health_nursing.html':       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_5_mental_health_nursing.html':          { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_5_child_health_nursing.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc5qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // BSc Semester 6
    'bsc_6_child_health_nursing.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_6_mental_health_nursing.html':          { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_6_midwifery_obgyn.html':                { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_6_nursing_management_leadership.html':  { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc6qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // BSc Semester 7
    'bsc_7_community_health_nursing.html':       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_7_nursing_research_statistics.html':    { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc_7_midwifery_obgyn.html':                { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'bsc7qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // PBBSc First Year
    'pbbsc_1_medical_surgical_nursing.html':     { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_1_child_health_nursing.html':         { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_1_microbiology.html':                 { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_1_biochemistry_biophysics.html':      { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_1_nutrition_dietetics.html':          { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_1_nursing_foundation.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_1_maternal_nursing.html':             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_1_psychology.html':                   { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc1qp.html':                             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc1live.html':                           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // PBBSc Second Year
    'pbbsc_2_nursing_service_administration.html':{ video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_2_mental_health_nursing.html':        { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_2_nursing_education.html':            { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_2_community_health_nursing.html':     { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc_2_sociology.html':                    { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'pbbsc2qp.html':                             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // GNM First Year
    'gnm_1_nutrition.html':                      { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_1_health_education.html':               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_1_environmental_hygiene.html':          { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_1_community_health_nursing.html':       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_1_first_aid.html':                      { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_1_fundamentals_of_nursing.html':        { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_1_sociology.html':                      { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_1_psychology.html':                     { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_1_microbiology.html':                   { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_1_anatomy_physiology.html':             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm1qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // GNM Second Year
    'gnm_2_medical_surgical_nursing.html':       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_2_mental_health_nursing.html':          { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_2_medical_surgical_nursing_two.html':   { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_2_child_health_nursing.html':           { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm2qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // GNM Third Year
    'gnm_3_community_health_nursing.html':       { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_3_midwifery.html':                      { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm_3_gynecology.html':                     { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'gnm3qp.html':                               { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    // 3D / EXAMS / REQ / COMM
    '3dmodels.html':                             { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'norcetenglish.html':                        { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'norcethindi.html':                          { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'esci.html':                                 { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'nursingrequirements.html':                  { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' },
    'communicativeenglish.html':                 { video: 'about:blank', lecture: 'about:blank', detailed: 'about:blank' }
};

// ============================================================
// DEMO QUIZ DATA â€” 2 questions per course section
// Key format: 'Course_Section' e.g. 'GNM_First Year'
// ============================================================
const DEMO_QUIZ = {
    // MSc First Year
    'MSc_First Year': [
        { q: "Which research design is most appropriate for studying cause-and-effect relationships in nursing?", o: ["Descriptive", "Experimental/RCT", "Historical", "Case Study"], a: 1 },
        { q: "The primary goal of Advanced Nursing Practice is to:", o: ["Replace physicians", "Provide specialized, evidence-based patient care", "Reduce hospital costs only", "Manage hospital administration"], a: 1 }
    ],
    // MSc Second Year
    'MSc_Second Year': [
        { q: "In nursing management, 'span of control' refers to:", o: ["Budget allocation", "Number of subordinates a manager supervises", "Span of patient care", "Duration of shift"], a: 1 },
        { q: "Which is a key principle of Mental Health Nursing?", o: ["Restraint first approach", "Therapeutic nurse-patient relationship", "Medication only", "Isolation"], a: 1 }
    ],
    // BSc Semesters
    'BSc_Semester 1': [
        { q: "The basic structural and functional unit of the human body is the:", o: ["Tissue", "Organ", "Cell", "System"], a: 2 },
        { q: "According to Maslow's hierarchy, which need must be met first?", o: ["Safety", "Love and Belonging", "Physiological needs", "Self-esteem"], a: 2 }
    ],
    'BSc_Semester 2': [
        { q: "Which vitamin is essential for calcium absorption in the body?", o: ["Vitamin A", "Vitamin C", "Vitamin D", "Vitamin K"], a: 2 },
        { q: "The pH of normal blood is approximately:", o: ["6.8", "7.0", "7.4", "8.0"], a: 2 }
    ],
    'BSc_Semester 3': [
        { q: "Which microorganism causes Tuberculosis?", o: ["Staphylococcus aureus", "Mycobacterium tuberculosis", "E. coli", "Streptococcus"], a: 1 },
        { q: "Paracetamol primarily acts as a:", o: ["Antibiotic", "Analgesic and Antipyretic", "Antifungal", "Anticoagulant"], a: 1 }
    ],
    'BSc_Semester 4': [
        { q: "The term 'genetics' was coined by:", o: ["Gregor Mendel", "William Bateson", "Charles Darwin", "Watson"], a: 1 },
        { q: "Normal Adult Blood Pressure is:", o: ["100/60 mmHg", "120/80 mmHg", "140/90 mmHg", "160/100 mmHg"], a: 1 }
    ],
    'BSc_Semester 5': [
        { q: "Primary Health Care was declared at:", o: ["Ottawa Charter", "Alma-Ata Declaration", "Jakarta Declaration", "Bangkok Charter"], a: 1 },
        { q: "Which Act governs forensic nursing practice in India?", o: ["Nursing Act 1947", "Indian Penal Code (IPC)", "Mental Health Act", "Drug Act"], a: 1 }
    ],
    'BSc_Semester 6': [
        { q: "The APGAR score assesses a newborn at:", o: ["Birth only", "1 and 5 minutes after birth", "24 hours", "1 week"], a: 1 },
        { q: "Which phase of labour involves delivery of the placenta?", o: ["First stage", "Second stage", "Third stage", "Fourth stage"], a: 2 }
    ],
    'BSc_Semester 7': [
        { q: "In nursing research, 'hypothesis' is a:", o: ["Proven fact", "Testable prediction/statement", "Research conclusion", "Data analysis"], a: 1 },
        { q: "The main goal of Community Health Nursing is:", o: ["Treating acute illness", "Promoting health and preventing disease in the community", "Hospital-based care only", "Surgical intervention"], a: 1 }
    ],
    // PBBSc
    'PBBSc_First Year': [
        { q: "The normal respiratory rate in a healthy adult is:", o: ["8â€“10/min", "12â€“20/min", "25â€“30/min", "35â€“40/min"], a: 1 },
        { q: "Apical pulse is best heard at the:", o: ["Radial artery", "5th intercostal space, midclavicular line", "Carotid artery", "Femoral artery"], a: 1 }
    ],
    'PBBSc_Second Year': [
        { q: "The 'nursing process' follows which order?", o: ["Assessment, Diagnosis, Planning, Implementation, Evaluation", "Diagnosis, Assessment, Planning, Evaluation, Implementation", "Planning, Assessment, Implementation, Diagnosis, Evaluation", "Implementation, Planning, Assessment, Evaluation, Diagnosis"], a: 0 },
        { q: "Which organization regulates nursing education in India?", o: ["WHO", "Indian Nursing Council (INC)", "MCI", "AIIMS"], a: 1 }
    ],
    // GNM
    'GNM_First Year': [
        { q: "The normal temperature of the human body is:", o: ["35Â°C", "36Â°C", "37Â°C", "38Â°C"], a: 2 },
        { q: "Which nutrient provides the most energy per gram?", o: ["Carbohydrates", "Proteins", "Fats", "Vitamins"], a: 2 }
    ],
    'GNM_Second Year': [
        { q: "A patient with a blood glucose of 45 mg/dL is most likely experiencing:", o: ["Hyperglycemia", "Hypoglycemia", "Normal range", "Diabetic ketoacidosis"], a: 1 },
        { q: "The correct position for a patient in shock is:", o: ["Fowler's position", "Trendelenburg/legs elevated", "Prone", "Left lateral"], a: 1 }
    ],
    'GNM_Third Year': [
        { q: "The first stage of labour begins with:", o: ["Rupture of membranes", "Onset of regular contractions to full cervical dilation", "Delivery of baby", "Delivery of placenta"], a: 1 },
        { q: "Which contraceptive method has the highest efficacy?", o: ["Condom", "Combined Oral Contraceptive Pill", "Copper-T IUD", "Calendar method"], a: 2 }
    ],
    // EXAMS
    'EXAMS_NORCET': [
        { q: "NORCET stands for:", o: ["Nursing Officer Recruitment Common Eligibility Test", "National Oral Care Exam Test", "Nursing Officer Regular Certification Exam", "None of the above"], a: 0 },
        { q: "The conducting authority of NORCET is:", o: ["AIIMS New Delhi", "UPSC", "NMC", "INC"], a: 0 }
    ],
    'EXAMS_ESCI': [
        { q: "ESCI exam primarily tests knowledge in:", o: ["Management only", "Clinical Nursing and Sciences", "Law", "History"], a: 1 },
        { q: "Normal serum sodium level is:", o: ["100â€“110 mEq/L", "135â€“145 mEq/L", "150â€“160 mEq/L", "120â€“130 mEq/L"], a: 1 }
    ],
    // Fallback default
    'default': [
        { q: "The normal adult heart rate is:", o: ["40â€“60 bpm", "60â€“100 bpm", "100â€“120 bpm", "120â€“140 bpm"], a: 1 },
        { q: "Florence Nightingale is known as the:", o: ["Mother of Medicine", "Lady with the Lamp / Founder of Modern Nursing", "Pioneer of Surgery", "First Doctor"], a: 1 }
    ]
};
</script>
</body>
</html>
