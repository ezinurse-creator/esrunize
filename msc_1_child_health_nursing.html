<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Child Health Nursing I</title>
    <meta name="description" content="Comprehensive syllabus with detailed notes and quizzes for Child Health Nursing I." />
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet" />
    <style>
        :root {
            --navy:     #0f2744;
            --blue:     #1a4b8c;
            --sky:      #3b82c4;
            --accent:   #e8a020;
            --accent-lt:#fef3dc;
            --teal:     #0d8c8c;
            --teal-lt:  #e0f5f5;
            --rose:     #c0392b;
            --rose-lt:  #fdecea;
            --white:    #ffffff;
            --off:      #f7f8fc;
            --border:   #e2e8f2;
            --muted:    #6b7a99;
            --text:     #1a2740;
            --radius:   14px;
            --shadow-xs: 0 1px 3px rgba(15,39,68,0.07);
            --shadow-sm: 0 2px 8px rgba(15,39,68,0.10);
            --shadow-md: 0 6px 24px rgba(15,39,68,0.13);
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'DM Sans', system-ui, sans-serif;
            background: var(--off);
            color: var(--text);
            min-height: 100vh;
        }

        /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
        .page-header {
            background: var(--navy);
            padding: 0 32px;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 64px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.18);
        }
        .page-header .brand {
            display: flex; align-items: center; gap: 10px;
        }
        .brand-dot {
            width: 10px; height: 10px;
            background: var(--accent);
            border-radius: 50%;
            box-shadow: 0 0 0 3px rgba(232,160,32,0.25);
        }
        .brand-name {
            font-family: 'DM Serif Display', serif;
            font-size: 1.05rem;
            color: #fff;
            letter-spacing: 0.01em;
        }
        .brand-sub {
            font-size: 0.72rem;
            color: rgba(255,255,255,0.45);
            font-weight: 300;
            letter-spacing: 0.06em;
            text-transform: uppercase;
        }

        /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
        .hero {
            background: linear-gradient(135deg, var(--navy) 0%, var(--blue) 60%, #1e5fa8 100%);
            padding: 52px 32px 44px;
            position: relative;
            overflow: hidden;
        }
        .hero::before {
            content: '';
            position: absolute; inset: 0;
            background: radial-gradient(ellipse at 80% 50%, rgba(59,130,196,0.25) 0%, transparent 65%);
        }
        .hero-pattern {
            position: absolute; inset: 0;
            background-image: radial-gradient(rgba(255,255,255,0.04) 1px, transparent 1px);
            background-size: 28px 28px;
        }
        .hero-inner {
            max-width: 860px; margin: 0 auto;
            position: relative; z-index: 1;
        }
        .hero-eyebrow {
            display: inline-flex; align-items: center; gap: 7px;
            background: rgba(255,255,255,0.09);
            border: 1px solid rgba(255,255,255,0.14);
            color: rgba(255,255,255,0.75);
            font-size: 0.72rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            padding: 5px 12px;
            border-radius: 40px;
            margin-bottom: 18px;
        }
        .hero-eyebrow span { color: var(--accent); }
        .hero h1 {
            font-family: 'DM Serif Display', serif;
            font-size: clamp(1.9rem, 4vw, 2.7rem);
            color: #fff;
            line-height: 1.15;
            margin-bottom: 10px;
        }
        .hero h1 em { color: var(--accent); font-style: italic; }
        .hero-desc {
            color: rgba(255,255,255,0.58);
            font-size: 0.95rem;
            font-weight: 300;
            margin-bottom: 28px;
        }
        .hero-actions {
            display: flex; gap: 12px; flex-wrap: wrap;
        }
        .btn-primary {
            display: inline-flex; align-items: center; gap: 8px;
            background: var(--accent);
            color: var(--navy);
            font-weight: 600;
            font-size: 0.9rem;
            padding: 11px 22px;
            border-radius: 8px;
            text-decoration: none;
            border: none; cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 2px 10px rgba(232,160,32,0.35);
        }
        .btn-primary:hover {
            background: #f5b030;
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(232,160,32,0.45);
        }
        .hero-stat-row {
            display: flex; gap: 28px; flex-wrap: wrap;
            margin-top: 32px; padding-top: 28px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        .hero-stat { text-align: left; }
        .hero-stat .num {
            font-family: 'DM Serif Display', serif;
            font-size: 1.6rem; color: #fff;
        }
        .hero-stat .lbl {
            font-size: 0.72rem; color: rgba(255,255,255,0.45);
            text-transform: uppercase; letter-spacing: 0.07em;
        }

        /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
        .main { max-width: 860px; margin: 0 auto; padding: 36px 32px 60px; }

        /* ‚îÄ‚îÄ SECTION LABEL ‚îÄ‚îÄ */
        .section-label {
            display: flex; align-items: center; gap: 10px;
            margin-bottom: 20px;
        }
        .section-label span {
            font-size: 0.72rem; font-weight: 600;
            letter-spacing: 0.12em; text-transform: uppercase;
            color: var(--muted);
        }
        .section-label::after {
            content: ''; flex: 1;
            height: 1px; background: var(--border);
        }

        /* ‚îÄ‚îÄ UNIT CARD ‚îÄ‚îÄ */
        .unit-card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            margin-bottom: 12px;
            box-shadow: var(--shadow-xs);
            overflow: hidden;
            transition: box-shadow 0.2s;
        }
        .unit-card:hover { box-shadow: var(--shadow-sm); }

        .unit-toggle {
            width: 100%;
            display: flex; align-items: center; justify-content: space-between;
            padding: 18px 22px;
            background: none; border: none; cursor: pointer;
            text-align: left;
            gap: 16px;
        }
        .unit-toggle-left {
            display: flex; align-items: center; gap: 14px;
        }
        .unit-num {
            width: 34px; height: 34px;
            background: var(--off);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 0.72rem; font-weight: 700;
            color: var(--muted);
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
            letter-spacing: 0.03em;
        }
        .unit-card[data-open="true"] .unit-num {
            background: var(--navy);
            border-color: var(--navy);
            color: #fff;
        }
        .unit-name {
            font-size: 0.93rem; font-weight: 600;
            color: var(--text);
            line-height: 1.3;
        }
        .unit-toggle-right {
            display: flex; align-items: center; gap: 10px; flex-shrink: 0;
        }
        .unit-count {
            font-size: 0.72rem; font-weight: 500;
            color: var(--muted);
            background: var(--off);
            border: 1px solid var(--border);
            padding: 3px 8px; border-radius: 20px;
        }
        .chevron {
            width: 20px; height: 20px;
            color: var(--muted);
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }
        .unit-card[data-open="true"] .chevron { transform: rotate(180deg); }

        .unit-body {
            display: none;
            padding: 0 16px 16px;
            border-top: 1px solid var(--border);
            background: var(--off);
        }
        .unit-body.open { display: block; }

        /* ‚îÄ‚îÄ RESOURCE GRID ‚îÄ‚îÄ */
        .resource-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            padding: 14px 0;
        }
        @media (max-width: 560px) { .resource-grid { grid-template-columns: 1fr; } }

        .res-btn {
            display: flex; align-items: center; gap: 10px;
            padding: 13px 16px;
            border-radius: 10px;
            border: 1.5px solid transparent;
            cursor: pointer;
            text-decoration: none;
            font-size: 0.875rem; font-weight: 500;
            transition: all 0.18s;
            background: var(--white);
            color: var(--text);
        }
        .res-btn .res-icon {
            width: 34px; height: 34px;
            border-radius: 8px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1rem; flex-shrink: 0;
        }
        .res-btn .res-label { line-height: 1.3; }
        .res-btn .res-label small {
            display: block; font-size: 0.72rem;
            font-weight: 400; opacity: 0.6; margin-top: 1px;
        }

        /* Notes */
        .res-btn.notes {
            border-color: #bfdbfe;
        }
        .res-btn.notes .res-icon { background: #dbeafe; }
        .res-btn.notes:hover { background: #eff6ff; border-color: var(--sky); box-shadow: var(--shadow-sm); }

        /* Quiz */
        .res-btn.quiz {
            border-color: #fde68a;
        }
        .res-btn.quiz .res-icon { background: var(--accent-lt); }
        .res-btn.quiz:hover { background: #fffbeb; border-color: var(--accent); box-shadow: var(--shadow-sm); }

        /* PYQ */
        .res-btn.pyq {
            border-color: #d1fae5;
        }
        .res-btn.pyq .res-icon { background: #ecfdf5; }
        .res-btn.pyq:hover { background: #f0fdf4; border-color: var(--teal); box-shadow: var(--shadow-sm); }

        /* open-external arrow */
        .res-btn .ext-arrow {
            margin-left: auto; opacity: 0; font-size: 0.8rem; color: var(--muted);
            transition: opacity 0.18s;
        }
        .res-btn:hover .ext-arrow { opacity: 1; }

        /* ‚îÄ‚îÄ QUIZ MODAL ‚îÄ‚îÄ */
        .quiz-modal {
            position: fixed; inset: 0;
            z-index: 200;
            display: none;
            align-items: flex-end;
        }
        .quiz-modal.open { display: flex; }
        .quiz-backdrop {
            position: absolute; inset: 0;
            background: rgba(10,20,40,0.6);
            backdrop-filter: blur(4px);
        }
        .quiz-sheet {
            position: relative; z-index: 1;
            background: var(--white);
            width: 100%;
            max-width: 680px;
            margin: 0 auto;
            border-radius: 20px 20px 0 0;
            max-height: 90vh;
            display: flex; flex-direction: column;
            box-shadow: 0 -8px 40px rgba(0,0,0,0.2);
            animation: slideUp 0.3s cubic-bezier(0.32,0.72,0,1);
        }
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to   { transform: translateY(0); }
        }
        .quiz-sheet-header {
            display: flex; align-items: center; justify-content: space-between;
            padding: 20px 24px 16px;
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
        }
        .quiz-sheet-title {
            font-family: 'DM Serif Display', serif;
            font-size: 1.15rem; color: var(--navy);
        }
        .quiz-close-btn {
            width: 32px; height: 32px;
            background: var(--off); border: 1px solid var(--border);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 1rem; color: var(--muted);
            transition: all 0.15s;
        }
        .quiz-close-btn:hover { background: var(--rose-lt); color: var(--rose); border-color: #f5c6c2; }
        .quiz-body {
            overflow-y: auto; padding: 20px 24px 28px; flex: 1;
        }
        .quiz-progress {
            display: flex; gap: 4px; margin-bottom: 22px;
        }
        .quiz-progress-pip {
            flex: 1; height: 4px;
            border-radius: 4px;
            background: var(--border);
            transition: background 0.3s;
        }
        .quiz-progress-pip.answered { background: var(--sky); }
        .quiz-progress-pip.correct  { background: var(--teal); }
        .quiz-progress-pip.wrong    { background: var(--rose); }

        .q-block { margin-bottom: 28px; }
        .q-block:last-child { margin-bottom: 0; }
        .q-num {
            font-size: 0.72rem; font-weight: 700;
            color: var(--muted); letter-spacing: 0.08em;
            text-transform: uppercase; margin-bottom: 6px;
        }
        .q-text {
            font-weight: 500; font-size: 0.95rem;
            color: var(--text); line-height: 1.5;
            margin-bottom: 12px;
        }
        .q-options { display: flex; flex-direction: column; gap: 8px; }
        .q-option {
            display: flex; align-items: center; gap: 10px;
            padding: 11px 14px;
            border: 1.5px solid var(--border);
            border-radius: 9px;
            cursor: pointer;
            font-size: 0.88rem;
            font-weight: 400;
            background: var(--white);
            transition: all 0.15s;
            position: relative;
        }
        .q-option:hover { border-color: var(--sky); background: #f0f7ff; }
        .q-option .q-opt-letter {
            width: 22px; height: 22px;
            border-radius: 50%;
            background: var(--off);
            border: 1px solid var(--border);
            display: flex; align-items: center; justify-content: center;
            font-size: 0.72rem; font-weight: 700;
            color: var(--muted); flex-shrink: 0;
            transition: all 0.15s;
        }
        .q-option.correct {
            background: var(--teal-lt); border-color: var(--teal); color: #065050;
        }
        .q-option.correct .q-opt-letter { background: var(--teal); border-color: var(--teal); color: #fff; }
        .q-option.wrong {
            background: var(--rose-lt); border-color: var(--rose); color: #7a1e16;
        }
        .q-option.wrong .q-opt-letter { background: var(--rose); border-color: var(--rose); color: #fff; }
        .q-option.disabled { cursor: default; }
        .q-option.disabled:not(.correct):not(.wrong):hover { border-color: var(--border); background: var(--white); }

        /* quiz score banner */
        .quiz-score {
            background: linear-gradient(135deg, var(--navy), var(--blue));
            color: #fff;
            border-radius: 12px;
            padding: 20px 22px;
            margin-bottom: 20px;
            display: none;
            align-items: center; gap: 16px;
        }
        .quiz-score.show { display: flex; }
        .quiz-score-num {
            font-family: 'DM Serif Display', serif;
            font-size: 2.2rem; line-height: 1;
        }
        .quiz-score-lbl { font-size: 0.8rem; opacity: 0.65; margin-top: 2px; }
        .quiz-score-msg { font-weight: 500; font-size: 0.92rem; }

        /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
        @media (max-width: 640px) {
            .page-header { padding: 0 16px; }
            .hero { padding: 36px 16px 32px; }
            .main { padding: 24px 16px 48px; }
            .unit-toggle { padding: 14px 16px; }
            .unit-body { padding: 0 10px 12px; }
            .quiz-sheet { border-radius: 16px 16px 0 0; }
            .quiz-body { padding: 16px 16px 24px; }
        }
    </style>
</head>
<body>

<!-- ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ -->
<header class="page-header">
    <div class="brand">
        <div class="brand-dot"></div>
        <div>
            <div class="brand-name">Child Health Nursing I</div>
            <div class="brand-sub">BSc Nursing ¬∑ Study Portal</div>
        </div>
    </div>
</header>

<!-- ‚îÄ‚îÄ HERO ‚îÄ‚îÄ -->
<section class="hero">
    <div class="hero-inner">
        <div class="hero-eyebrow">üìã <span>Syllabus 2024‚Äì25</span> ¬∑ Child Health Nursing</div>
        <h1>Child Health<br/><em>Nursing I</em></h1>
        <p class="hero-desc">Unit notes, quizzes & previous year questions ‚Äî all in one place.</p>
        <div class="hero-actions">
            <button class="btn-primary" onclick="openDrive('https://drive.google.com/file/d/1rgyh9yvG8KYd3pGj76KYTA6eXrBDtDgv/view', 'Child Health Nursing Syllabus')">
                üìÑ Download Syllabus
            </button>
        </div>
        <div class="hero-stat-row">
            <div class="hero-stat"><div class="num">12</div><div class="lbl">Units</div></div>
            <div class="hero-stat"><div class="num">60+</div><div class="lbl">Quiz Questions</div></div>
            <div class="hero-stat"><div class="num">7</div><div class="lbl">PYQ Papers</div></div>
        </div>
    </div>
</section>

<!-- ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ -->
<main class="main">

    <div class="section-label"><span>Course Units</span></div>

    <div id="units-list">

        <!-- UNIT 1 -->
        <div class="unit-card" data-open="false" id="unit1">
            <button class="unit-toggle" onclick="toggleUnit('unit1')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">01</div>
                    <div class="unit-name">Introduction</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit1-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1X7htNfDOlqnwA6ak9yOy-2mQZDGSADs8/view', 'Unit 1 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(1)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 1 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 2 -->
        <div class="unit-card" data-open="false" id="unit2">
            <button class="unit-toggle" onclick="toggleUnit('unit2')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">02</div>
                    <div class="unit-name">Assessment of Pediatric Clients</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit2-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1GwiQQjr26JHX2W2mVY5y1JXeJo1Oa3Y1/view', 'Unit 2 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(2)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 2 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 3 -->
        <div class="unit-card" data-open="false" id="unit3">
            <button class="unit-toggle" onclick="toggleUnit('unit3')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">03</div>
                    <div class="unit-name">Hospitalized Child</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit3-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1BAM5EXg3LxEgBSNTuHDjGXuS7tusSJfR/view', 'Unit 3 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(3)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 3 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 4 -->
        <div class="unit-card" data-open="false" id="unit4">
            <button class="unit-toggle" onclick="toggleUnit('unit4')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">04</div>
                    <div class="unit-name">Pre-natal Pediatrics</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit4-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1ny2P9ZHhgzavWRgOnpwrpuwhcsVa_S5B/view', 'Unit 4 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(4)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 4 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 5 -->
        <div class="unit-card" data-open="false" id="unit5">
            <button class="unit-toggle" onclick="toggleUnit('unit5')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">05</div>
                    <div class="unit-name">Growth & Development of Children</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit5-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1zVOLhHXoDawnP7K9DaeJuSUQzQhPbhaY/view', 'Unit 5 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(5)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 5 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 6 -->
        <div class="unit-card" data-open="false" id="unit6">
            <button class="unit-toggle" onclick="toggleUnit('unit6')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">06</div>
                    <div class="unit-name">Behavioral Pediatrics</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit6-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1QpP1JApAnXedWwy7I57MOHxvhr9eTSET/view', 'Unit 6 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(6)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 6 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 7 -->
        <div class="unit-card" data-open="false" id="unit7">
            <button class="unit-toggle" onclick="toggleUnit('unit7')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">07</div>
                    <div class="unit-name">Preventive Pediatrics</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit7-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1uOztwz2zuJRktVofSfu4asmQo1pGmrgI/view', 'Unit 7 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(7)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 7 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 8 -->
        <div class="unit-card" data-open="false" id="unit8">
            <button class="unit-toggle" onclick="toggleUnit('unit8')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">08</div>
                    <div class="unit-name">Neonatal Nursing</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit8-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1RMz0AkFU7OEXBXzvprgM3aJ6rKOK6fbt/view', 'Unit 8 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(8)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 8 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 9 -->
        <div class="unit-card" data-open="false" id="unit9">
            <button class="unit-toggle" onclick="toggleUnit('unit9')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">09</div>
                    <div class="unit-name">IMNCI</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit9-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1O3opAT_2iR154yBD4KH_Q4eRu7G0xcXF/view', 'Unit 9 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(9)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 9 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 10 -->
        <div class="unit-card" data-open="false" id="unit10">
            <button class="unit-toggle" onclick="toggleUnit('unit10')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">10</div>
                    <div class="unit-name">Pediatric Emergency</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit10-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1-0xNrJCuCll-Bt-0u24S7zPgL87Q8ciY/view', 'Unit 10 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(10)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 10 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 11 -->
        <div class="unit-card" data-open="false" id="unit11">
            <button class="unit-toggle" onclick="toggleUnit('unit11')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">11</div>
                    <div class="unit-name">Quality Assurance</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit11-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1sSuwxb9pQEa_zVgKkeBlfXySbHj55iki/view', 'Unit 11 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(11)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 11 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- UNIT 12 -->
        <div class="unit-card" data-open="false" id="unit12">
            <button class="unit-toggle" onclick="toggleUnit('unit12')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num">12</div>
                    <div class="unit-name">Modification of Nursing Management</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">2 resources</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="unit12-body">
                <div class="resource-grid">
                    <button class="res-btn notes" onclick="openDrive('https://drive.google.com/file/d/1C4pxv-YpkL04zwwlv5FmoCImns4CBfWz/view', 'Unit 12 Notes')">
                        <div class="res-icon">üìñ</div>
                        <div class="res-label">Detailed Notes <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn quiz" onclick="openQuiz(12)">
                        <div class="res-icon">‚úçÔ∏è</div>
                        <div class="res-label">Unit 12 Quiz <small>5 questions</small></div>
                    </button>
                </div>
            </div>
        </div>

        <!-- PYQ -->
        <div class="unit-card" data-open="false" id="pyq">
            <button class="unit-toggle" onclick="toggleUnit('pyq')" aria-expanded="false">
                <div class="unit-toggle-left">
                    <div class="unit-num" style="font-size:0.62rem;">PYQ</div>
                    <div class="unit-name">Previous Year Questions</div>
                </div>
                <div class="unit-toggle-right">
                    <span class="unit-count">7 papers</span>
                    <svg class="chevron" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5,8 10,13 15,8"/></svg>
                </div>
            </button>
            <div class="unit-body" id="pyq-body">
                <div class="resource-grid">
                    <button class="res-btn pyq" onclick="openDrive('https://drive.google.com/file/d/1IDO6xUMEcfkBo0FsZm9e67pLXXpkun_i/view', 'PYQ Jan 2024')">
                        <div class="res-icon">üìÑ</div>
                        <div class="res-label">January 2024 <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn pyq" onclick="openDrive('https://drive.google.com/file/d/13pRNSS5dd1ftdrg9yCCGHCS8zJ2Nb_0l/view', 'PYQ Jun 2023')">
                        <div class="res-icon">üìÑ</div>
                        <div class="res-label">June 2023 <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn pyq" onclick="openDrive('https://drive.google.com/file/d/1DRViJXCulJElinNODJzK36tegIl_i9rB/view', 'PYQ Mar 2023')">
                        <div class="res-icon">üìÑ</div>
                        <div class="res-label">March 2023 <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn pyq" onclick="openDrive('https://drive.google.com/file/d/17t8ah3BiNjAL86IzBJIQS1nvXbDObB1x/view', 'PYQ May 2022')">
                        <div class="res-icon">üìÑ</div>
                        <div class="res-label">May 2022 <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn pyq" onclick="openDrive('https://drive.google.com/file/d/1pp9j2oOVHLmvrlDCKSsCdbhS1v5kZfug/view', 'PYQ Feb 2022')">
                        <div class="res-icon">üìÑ</div>
                        <div class="res-label">February 2022 <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn pyq" onclick="openDrive('https://drive.google.com/file/d/137po9CmHx946_Xx3xxfPXpDMlfm4-Ubu/view', 'PYQ Aug 2021')">
                        <div class="res-icon">üìÑ</div>
                        <div class="res-label">August 2021 <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                    <button class="res-btn pyq" onclick="openDrive('https://drive.google.com/file/d/13KqPvoPUKQUYyUiQPRvmkwcXfE-qpYht/view', 'PYQ Sep 2020')">
                        <div class="res-icon">üìÑ</div>
                        <div class="res-label">September 2020 <small>Open in Drive</small></div>
                        <span class="ext-arrow">‚Üó</span>
                    </button>
                </div>
            </div>
        </div>

    </div><!-- /units-list -->

</main>

<!-- ‚îÄ‚îÄ QUIZ BOTTOM SHEET ‚îÄ‚îÄ -->
<div class="quiz-modal" id="quiz-modal" role="dialog" aria-modal="true" aria-label="Quiz">
    <div class="quiz-backdrop" onclick="closeQuiz()"></div>
    <div class="quiz-sheet">
        <div class="quiz-sheet-header">
            <div class="quiz-sheet-title" id="quiz-title">Quiz</div>
            <button class="quiz-close-btn" onclick="closeQuiz()" aria-label="Close quiz">‚úï</button>
        </div>
        <div class="quiz-body" id="quiz-body"></div>
    </div>
</div>

<script>
// ‚îÄ‚îÄ QUIZ DATA ‚îÄ‚îÄ
const QUIZ_DATA = {
    1: [
        { q: "Who is known as the 'Father of Pediatrics'?", o: ["Hippocrates", "Abraham Jacobi", "Sigmund Freud", "Florence Nightingale"], a: 1 },
        { q: "The term 'Pediatrics' is derived from Greek words meaning:", o: ["Child and Cure", "Child and Play", "Disease and Child", "Growth and Development"], a: 0 },
        { q: "Which of the following is a key trend in pediatric nursing?", o: ["Institutionalization", "Family-Centered Care", "Excluding parents", "Adult-focused care"], a: 1 },
        { q: "The rights of the child were adopted by the UN General Assembly in:", o: ["1959", "1989", "1948", "2000"], a: 1 },
        { q: "Pediatric nursing care focuses on:", o: ["Curative care only", "Preventive, Promotive, and Curative care", "Hospice care only", "Surgical care only"], a: 1 }
    ],
    2: [
        { q: "The normal heart rate of a newborn is:", o: ["60-80 bpm", "120-160 bpm", "80-100 bpm", "100-120 bpm"], a: 1 },
        { q: "Anthropometric measurements include:", o: ["BP and Pulse", "Height, Weight, Head Circumference", "Urine output", "Blood sugar"], a: 1 },
        { q: "The posterior fontanelle usually closes by:", o: ["6-8 weeks", "12-18 months", "3-4 months", "Birth"], a: 0 },
        { q: "Which site is most preferred for taking temperature in infants?", o: ["Oral", "Axillary", "Rectal", "Tympanic"], a: 1 },
        { q: "Head circumference is measured at the level of:", o: ["Eyebrows", "Occipital protuberance and supraorbital ridges", "Ears", "Neck"], a: 1 }
    ],
    3: [
        { q: "The major stressor for a toddler in the hospital is:", o: ["Pain", "Separation Anxiety", "Loss of control", "Fear of death"], a: 1 },
        { q: "The three stages of separation anxiety are:", o: ["Cry, Sleep, Eat", "Protest, Despair, Detachment", "Anger, Bargaining, Acceptance", "Shock, Denial, Anger"], a: 1 },
        { q: "Therapeutic play in the hospital helps the child to:", o: ["Forget parents", "Express fears and feelings", "Sleep better", "Eat more"], a: 1 },
        { q: "During the 'Despair' stage of separation anxiety, the child appears:", o: ["Happy", "Withdrawn and sad", "Violent", "Active"], a: 1 },
        { q: "To reduce anxiety in a preschooler, the nurse should:", o: ["Restrain the child", "Explain procedures in simple terms", "Ignore the child", "Send parents away"], a: 1 }
    ],
    4: [
        { q: "Genetic counseling is most important for:", o: ["Consanguineous marriages", "Common cold", "Fractures", "Infections"], a: 0 },
        { q: "Down syndrome is caused by:", o: ["Trisomy 18", "Trisomy 21", "Monosomy X", "Fragile X"], a: 1 },
        { q: "Prenatal pediatrics primarily deals with:", o: ["School health", "Fetal health and genetics", "Adolescent health", "Geriatrics"], a: 1 },
        { q: "Teratogens are agents that cause:", o: ["Better growth", "Congenital anomalies", "Genetic mutation", "Multiple pregnancies"], a: 1 },
        { q: "Amniocentesis is used for:", o: ["Inducing labor", "Detecting fetal abnormalities", "Feeding the fetus", "Measuring weight"], a: 1 }
    ],
    5: [
        { q: "Cephalocaudal development means growth proceeds from:", o: ["Feet to Head", "Head to Toe", "Center to Periphery", "Simple to Complex"], a: 1 },
        { q: "According to Erikson, the developmental task of infancy is:", o: ["Trust vs Mistrust", "Autonomy vs Shame", "Initiative vs Guilt", "Industry vs Inferiority"], a: 0 },
        { q: "An infant usually doubles their birth weight by:", o: ["3 months", "6 months", "9 months", "12 months"], a: 1 },
        { q: "Object permanence is a concept in which theory?", o: ["Freud", "Piaget", "Kohlberg", "Erikson"], a: 1 },
        { q: "Which age group engages in 'Parallel Play'?", o: ["Infants", "Toddlers", "Preschoolers", "School age"], a: 1 }
    ],
    6: [
        { q: "Pica is defined as:", o: ["Bedwetting", "Eating non-nutritive substances", "Thumb sucking", "Nail biting"], a: 1 },
        { q: "Enuresis refers to:", o: ["Involuntary passage of stool", "Involuntary urination", "Sleep walking", "Stuttering"], a: 1 },
        { q: "Temper tantrums are most common in:", o: ["Infants", "Toddlers", "School age", "Adolescents"], a: 1 },
        { q: "Encopresis is:", o: ["Bedwetting", "Fecal incontinence", "Vomiting", "Stuttering"], a: 1 },
        { q: "A common cause of thumb sucking is:", o: ["Hunger", "Insecurity/Anxiety", "Pain", "Thirst"], a: 1 }
    ],
    7: [
        { q: "BCG vaccine protects against:", o: ["Polio", "Tuberculosis", "Measles", "Diphtheria"], a: 1 },
        { q: "The 'Cold Chain' is used to:", o: ["Store food", "Maintain vaccine potency", "Cool patients", "Transport blood"], a: 1 },
        { q: "Vitamin A solution is administered to prevent:", o: ["Rickets", "Night Blindness", "Scurvy", "Beriberi"], a: 1 },
        { q: "The route of administration for the Measles vaccine is:", o: ["Intramuscular", "Subcutaneous", "Intradermal", "Oral"], a: 1 },
        { q: "Exclusive breastfeeding is recommended for:", o: ["3 months", "6 months", "9 months", "1 year"], a: 1 }
    ],
    8: [
        { q: "APGAR score is assessed at:", o: ["1 and 5 minutes", "10 and 20 minutes", "1 hour", "24 hours"], a: 0 },
        { q: "Kangaroo Mother Care (KMC) provides:", o: ["Food", "Warmth and bonding", "Medicine", "Oxygen"], a: 1 },
        { q: "Physiological jaundice usually appears:", o: ["At birth", "After 24 hours", "After 1 week", "Never"], a: 1 },
        { q: "The reflex where a baby turns its head towards a touch on the cheek is:", o: ["Moro", "Rooting", "Grasp", "Babinski"], a: 1 },
        { q: "Meconium is:", o: ["First urine", "First stool", "Vernix caseosa", "Breast milk"], a: 1 }
    ],
    9: [
        { q: "IMNCI stands for:", o: ["International Management of Newborns", "Integrated Management of Neonatal and Childhood Illnesses", "Indian Medical Nursing Council", "None"], a: 1 },
        { q: "In IMNCI, 'Pink' color code indicates:", o: ["Home care", "OPD treatment", "Urgent referral/Hospitalization", "Follow up"], a: 2 },
        { q: "A general danger sign in IMNCI is:", o: ["Cough", "Fever", "Convulsions/Inability to drink", "Diarrhea"], a: 2 },
        { q: "ORS is used to treat:", o: ["Pneumonia", "Dehydration", "Malaria", "Ear infection"], a: 1 },
        { q: "In IMNCI, 'Yellow' color code implies:", o: ["No treatment", "Referral", "Specific medical treatment at outpatient health facility", "Surgery"], a: 2 }
    ],
    10: [
        { q: "The ratio of compressions to breaths in pediatric CPR (one rescuer) is:", o: ["15:2", "30:2", "5:1", "10:1"], a: 1 },
        { q: "Heimlich maneuver is used for:", o: ["Drowning", "Choking/Foreign body aspiration", "Burns", "Poisoning"], a: 1 },
        { q: "In case of Kerosene poisoning, you should:", o: ["Induce vomiting", "NOT induce vomiting", "Give water", "Give milk"], a: 1 },
        { q: "The most common type of burn in children is:", o: ["Electrical", "Scalds", "Chemical", "Radiation"], a: 1 },
        { q: "Rule of Nines is used to assess:", o: ["Height", "Weight", "Burn surface area", "Fractures"], a: 2 }
    ],
    11: [
        { q: "Quality Assurance (QA) mainly focuses on:", o: ["Cutting costs", "Improving standards of care", "Staff attendance", "Equipment purchase"], a: 1 },
        { q: "Nursing Audit is a method of:", o: ["Budgeting", "Evaluating nursing care", "Teaching", "Recruitment"], a: 1 },
        { q: "Standard precautions are used to prevent:", o: ["Accidents", "Infection transmission", "Bed sores", "Falls"], a: 1 },
        { q: "Documentation in nursing should be:", o: ["Subjective", "Accurate, timely, and complete", "Written in pencil", "Done next day"], a: 1 },
        { q: "Benchmarking is used to:", o: ["Compare performance with best practices", "Mark attendance", "Clean benches", "Discipline staff"], a: 0 }
    ],
    12: [
        { q: "Clark's rule for drug calculation is based on:", o: ["Age", "Weight", "Height", "BSA"], a: 1 },
        { q: "When restraining a child, the nurse must:", o: ["Leave child alone", "Check circulation and skin integrity frequently", "Tie knots very tight", "Use metal chains"], a: 1 },
        { q: "Before a procedure, consent should be obtained from:", o: ["The child", "Parents/Guardians", "Nurse", "Teacher"], a: 1 },
        { q: "Pediatric drug doses are usually calculated in:", o: ["mg/kg body weight", "mg/year of age", "Fixed adult dose", "Random estimation"], a: 0 },
        { q: "Mummy restraint is used for:", o: ["Leg surgery", "Head and neck examination", "Feeding", "Playing"], a: 1 }
    ]
};

const LETTERS = ['A','B','C','D'];
let quizAnswered = [];
let currentQuizId = null;

// ‚îÄ‚îÄ UNIT TOGGLE ‚îÄ‚îÄ
function toggleUnit(id) {
    const card = document.getElementById(id);
    const body = document.getElementById(id + '-body');
    const btn  = card.querySelector('.unit-toggle');
    const open = card.dataset.open === 'true';
    card.dataset.open = !open;
    btn.setAttribute('aria-expanded', !open);
    body.classList.toggle('open', !open);
}

// ‚îÄ‚îÄ OPEN DRIVE (new tab, full view) ‚îÄ‚îÄ
function openDrive(url, title) {
    // Strip /preview suffix and ensure /view for full Google Drive view
    const fullUrl = url
        .replace(/\/preview.*$/, '')
        .replace(/\/view.*$/, '')
        + '/view';
    window.open(fullUrl, '_blank', 'noopener,noreferrer');
}

// ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ
function openQuiz(unitId) {
    currentQuizId = unitId;
    const qs = QUIZ_DATA[unitId] || [];
    quizAnswered = new Array(qs.length).fill(null);

    document.getElementById('quiz-title').textContent = `Unit ${unitId} Quiz`;

    // Build HTML
    const pips = qs.map((_, i) => `<div class="quiz-progress-pip" id="pip-${i}"></div>`).join('');

    let html = `<div class="quiz-score" id="quiz-score">
        <div>
            <div class="quiz-score-num" id="score-num">‚Äî</div>
            <div class="quiz-score-lbl">Score</div>
        </div>
        <div class="quiz-score-msg" id="score-msg"></div>
    </div>`;

    html += `<div class="quiz-progress" id="quiz-progress">${pips}</div>`;

    qs.forEach((q, qi) => {
        html += `<div class="q-block" id="qblock-${qi}">
            <div class="q-num">Question ${qi + 1} of ${qs.length}</div>
            <div class="q-text">${q.q}</div>
            <div class="q-options">
                ${q.o.map((opt, oi) => `
                    <button class="q-option" id="opt-${qi}-${oi}" onclick="answer(${qi}, ${oi}, ${q.a})">
                        <span class="q-opt-letter">${LETTERS[oi]}</span>
                        ${opt}
                    </button>
                `).join('')}
            </div>
        </div>`;
    });

    if (qs.length === 0) html += `<p style="color:var(--muted);padding:20px 0;">Quiz coming soon!</p>`;

    document.getElementById('quiz-body').innerHTML = html;

    // Show modal ‚Äî use pushState so back button closes it
    const modal = document.getElementById('quiz-modal');
    modal.classList.add('open');
    document.body.style.overflow = 'hidden';
    history.pushState({ quiz: true, unitId }, '', '#quiz');
}

function answer(qi, oi, correct) {
    if (quizAnswered[qi] !== null) return;
    quizAnswered[qi] = oi;

    const qs = QUIZ_DATA[currentQuizId];
    const allOpts = document.querySelectorAll(`#qblock-${qi} .q-option`);

    allOpts.forEach((btn, i) => {
        btn.classList.add('disabled');
        if (i === correct)  btn.classList.add('correct');
        else if (i === oi)  btn.classList.add('wrong');
    });

    // Update pip
    const pip = document.getElementById(`pip-${qi}`);
    pip.classList.add(oi === correct ? 'correct' : 'wrong');

    // Check if all answered
    if (quizAnswered.every(a => a !== null)) {
        const score = quizAnswered.filter((a, i) => a === (QUIZ_DATA[currentQuizId][i].a)).length;
        const pct = Math.round((score / qs.length) * 100);
        const msg = pct === 100 ? 'üèÜ Perfect score!' : pct >= 80 ? 'üéâ Great job!' : pct >= 60 ? 'üëç Good effort!' : 'üìö Keep studying!';
        const scoreEl = document.getElementById('quiz-score');
        document.getElementById('score-num').textContent = `${score}/${qs.length}`;
        document.getElementById('score-msg').textContent = msg;
        scoreEl.classList.add('show');
        scoreEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

function closeQuiz() {
    const modal = document.getElementById('quiz-modal');
    modal.classList.remove('open');
    document.body.style.overflow = '';
    currentQuizId = null;
    // Only go back if we pushed a quiz state
    if (history.state && history.state.quiz) {
        history.back();
    }
}

// Back button closes quiz (not the page)
window.addEventListener('popstate', (e) => {
    const modal = document.getElementById('quiz-modal');
    if (modal.classList.contains('open')) {
        modal.classList.remove('open');
        document.body.style.overflow = '';
        currentQuizId = null;
    }
});

// Keyboard close
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeQuiz();
});
</script>
</body>
</html>
