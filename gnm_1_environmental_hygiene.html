<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Environmental Hygiene</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <style>
        :root {
            --brand: #003B82; --accent: #00B9F2; --gray-50: #f9fafb; --gray-200: #e5e7eb; --gray-900: #111827;
            --danger: #ef4444; --success: #10b981; --warning: #f59e0b;
        }
        * { box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: white; color: var(--gray-900); padding: 24px; max-width: 1000px; margin: 0 auto; }
        .syllabus-btn { display: block; width: 100%; padding: 18px 24px; margin: 12px 0; background: white; color: var(--brand); border: 2px solid var(--brand); font-weight: 700; font-size: 16px; text-align: center; cursor: pointer; border-radius: 12px; transition: all 0.2s ease; text-decoration: none; }
        .syllabus-btn:hover { background: var(--gray-50); transform: translateY(-1px); }
        .unit-header { display: flex; justify-content: space-between; align-items: center; width: 100%; padding: 18px 24px; margin: 16px 0; background: var(--brand); color: white; font-weight: 600; font-size: 16px; border-radius: 12px; cursor: pointer; transition: 0.2s; }
        .unit-header:hover { background: #002d63; }
        .unit-content { padding: 0 12px; max-height: 0; overflow: hidden; transition: max-height 0.4s ease, padding 0.3s ease; }
        .unit-content.active { padding: 24px 12px; max-height: none; }
        .subsection { padding: 20px; background: white; border-radius: 12px; border: 1px solid var(--gray-200); box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .resource-btn { display: flex; width: 100%; padding: 14px 18px; margin: 6px 0; background: var(--gray-50); border-radius: 8px; font-weight: 500; border: 1px solid var(--gray-200); cursor: pointer; gap: 12px; transition: 0.2s; align-items: center; }
        
        /* EXISTING BUTTON STYLES */
        .resource-btn.notes { background: #f0f9ff; border-color: #bae6fd; color: #085d8c; }
        .resource-btn.video { background: #f5f3ff; border-color: #d8b4fe; color: #5a32a6; }
        .resource-btn.quiz { background: #fffbeb; border-color: #fcd34d; color: #92400e; }
        .resource-btn.model { background: #fdf4ff; border-color: #f0abfc; color: #86198f; }

        /* NEW BUTTON STYLES FOR APP */
        .resource-btn.imp-discussion { background: #fef2f2; border-color: #fecaca; color: #b91c1c; } /* Light Red Background */
        .resource-btn.imp-pdf { background: #fff7ed; border-color: #fed7aa; color: #c2410c; } /* Light Orange Background */
        
        .resource-btn:hover { transform: translateY(-1px); filter: brightness(0.98); }
        .icon { font-size: 1.3rem; min-width: 24px; color: var(--accent); }
        .icon.video-icon { color: #8b5cf6; } .icon.quiz-icon { color: #f59e0b; } .icon.model-icon { color: #d946ef; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 1000; display: none; flex-direction: column; }
        .modal-header { height: 60px; background: white; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; flex-shrink: 0; }
        .btn-close { background: var(--danger); color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 600; }
        .modal-body { flex: 1; background: #f3f4f6; position: relative; padding: 20px; display:flex; justify-content:center; overflow-y: auto;}
        .iframe-res { width: 100%; height: 100%; border: none; background: white; }
        .quiz-container { background: white; width: 100%; max-width: 800px; padding: 30px; border-radius: 12px; margin-bottom: 50px; }
        .quiz-option { padding: 12px 15px; border: 2px solid var(--gray-200); border-radius: 8px; margin-bottom: 10px; cursor: pointer; transition: 0.2s; }
        .quiz-option:hover { background: #f9fafb; border-color: var(--brand); }
        .quiz-option.correct { background: #d1fae5; border-color: var(--success); color: #065f46; }
        .quiz-option.wrong { background: #fee2e2; border-color: var(--danger); color: #991b1b; }
        .btn-quiz { background: var(--brand); color: white; width: 100%; padding: 12px; border: none; border-radius: 6px; font-weight: 600; font-size: 16px; margin-top: 20px; cursor: pointer;}
        @media (max-width: 768px) { body { padding: 16px; } .quiz-container { padding: 15px; } }
    </style>
</head>
<body>
    <a class="syllabus-btn" href="https://drive.google.com/file/d/1ntxOCduGNnab-1NPqI8zkjQ2kx4vIXsn/view?usp=drive_link" target="_blank">üìÑ DOWNLOAD SYLLABUS</a>
    <div id="units">
                <div class="unit-container">
                    <div class="unit-header" role="button" aria-expanded="false" onclick="toggleUnit(this)">
                        UNIT 1 -  INTRODUCTION <span>üîΩ</span>
                    </div>
                    <div class="unit-content"><div class="subsection"><div class="resource-btn notes" onclick="openResource('notes', 'https://drive.google.com/file/d/1z8hg9272_Uje8OUqEYG2sU4YTbr8R0GU/preview', 'Detailed Notes')"><span class="icon">üìö</span><span>Detailed Notes</span></div><div class="resource-btn video" onclick="openResource('video', 'https://drive.google.com/file/d/1yyATSxuAMwqphK-IZOMwkIwjG5upA3o3/preview', 'Introduction')"><span class="icon video-icon">‚ñ∂Ô∏è</span><span>Introduction</span></div><div class="resource-btn notes" onclick="openResource('notes', 'https://drive.google.com/file/d/1yjyGcOY_K-JPQgWwLA-bfGaOle0AWWED/preview', 'Lecture Notes')"><span class="icon">üìù</span><span>Lecture Notes</span></div><div class="resource-btn quiz" onclick="startQuiz(1)"><span class="icon quiz-icon">‚úçÔ∏è</span><span>Take Unit 1 Quiz</span></div></div></div>
                </div>
                <div class="unit-container">
                    <div class="unit-header" role="button" aria-expanded="false" onclick="toggleUnit(this)">
                        UNIT 2 - ENVIRONMENTAL FACTORS CONTRIBUTING TO HEALTH <span>üîΩ</span>
                    </div>
                    <div class="unit-content"><div class="subsection"><div class="resource-btn notes" onclick="openResource('notes', 'https://drive.google.com/file/d/1ScqReOBEPIi4uDnYL4-b4MDeENk8o0Xx/preview', 'Detailed Notes')"><span class="icon">üìö</span><span>Detailed Notes</span></div><div class="resource-btn video" onclick="openResource('video', 'https://drive.google.com/file/d/1ffK5xVB-Q3OVgsGI3q8gMvYEVsA5tLXy/preview', 'Water')"><span class="icon video-icon">‚ñ∂Ô∏è</span><span>Water</span></div><div class="resource-btn video" onclick="openResource('video', 'https://drive.google.com/file/d/10eGsNI0ZfW9mYBuB8uUabXO2urvSd34R/preview', 'Rainwater Harvesting, Water Pollution')"><span class="icon video-icon">‚ñ∂Ô∏è</span><span>Rainwater Harvesting, Water Pollution</span></div><div class="resource-btn video" onclick="openResource('video', 'https://drive.google.com/file/d/1AIKAwqXVmfP58G5aialqCwsqmMB2w0GT/preview', 'Air pollution')"><span class="icon video-icon">‚ñ∂Ô∏è</span><span>Air pollution</span></div><div class="resource-btn video" onclick="openResource('video', 'https://drive.google.com/file/d/1BoG2G-CupHtP5MkfKTMS0Ts9WRluaheQ/preview', ' Housing')"><span class="icon video-icon">‚ñ∂Ô∏è</span><span> Housing</span></div><div class="resource-btn video" onclick="openResource('video', 'https://drive.google.com/file/d/1YZyGyJpANiGbDQ97VHZYxN0EiDOClo6L/preview', ' Lighting')"><span class="icon video-icon">‚ñ∂Ô∏è</span><span> Lighting</span></div><div class="resource-btn notes" onclick="openResource('notes', 'https://drive.google.com/file/d/1xRrJISi0OOo12Kw8Ee_ZGG-E_qugl35m/preview', 'Lecture Notes')"><span class="icon">üìù</span><span>Lecture Notes</span></div><div class="resource-btn quiz" onclick="startQuiz(2)"><span class="icon quiz-icon">‚úçÔ∏è</span><span>Take Unit 2 Quiz</span></div></div></div>
                </div>
                <div class="unit-container">
                    <div class="unit-header" role="button" aria-expanded="false" onclick="toggleUnit(this)">
                        UNIT 3 -  COMMUNITY ORGANIZATIONS TO PROMOTE ENVIRONMENTAL HEALTH <span>üîΩ</span>
                    </div>
                    <div class="unit-content"><div class="subsection"><div class="resource-btn notes" onclick="openResource('notes', 'https://drive.google.com/file/d/1pF1X-n8jY9290i_fU3_k29WF_VIJOIxW/preview', 'Detailed Notes')"><span class="icon">üìö</span><span>Detailed Notes</span></div><div class="resource-btn video" onclick="openResource('video', 'https://drive.google.com/file/d/19BzYf_Tvk6ir1vEssZRRtvuh_XdheGUB/preview', 'Introduction, Environmental Health Risk')"><span class="icon video-icon">‚ñ∂Ô∏è</span><span>Introduction, Environmental Health Risk</span></div><div class="resource-btn notes" onclick="openResource('notes', 'https://drive.google.com/file/d/12LloapJRmF5GNgzzMYyhPhav-Bkij8vO/preview', 'Lecture Notes')"><span class="icon">üìù</span><span>Lecture Notes</span></div><div class="resource-btn quiz" onclick="startQuiz(3)"><span class="icon quiz-icon">‚úçÔ∏è</span><span>Take Unit 3 Quiz</span></div></div></div>
                </div></div>
    <div id="app-modal" class="modal-overlay">
        <div class="modal-header">
            <div id="modal-title" style="font-weight:700; color:var(--brand);">Resource</div>
            <button class="btn-close" onclick="closeModal()">Close X</button>
        </div>
        <div id="modal-body" class="modal-body"></div>
    </div>
<script>
    // --- 1. ENVIRONMENTAL HYGIENE QUIZ DATA (Units 1-3) ---
    const QUIZ_DATA = {
        "1": [{"q":"Which of the following gases is the most abundant in the Earth‚Äôs atmosphere?","o":["Oxygen","Nitrogen","Carbon dioxide","Argon"],"a":1},{"q":"Florence Nightingale emphasized that a clean, well-ventilated environment directly contributes to","o":["Genetic diversity","Patient recovery","Climate change","Biodiversity conservation"],"a":1},{"q":"Which of the following is not a component of the natural environment?","o":["Atmosphere","Hydrosphere","Lithosphere","Transportation networks"],"a":3},{"q":"PM2.5 and PM10, major air pollutants, primarily affect which human organ system?","o":["Nervous system","Respiratory system","Digestive system","Reproductive system"],"a":1},{"q":"Which of the following diseases is not water-borne?","o":["Cholera","Typhoid","Hepatitis A","Malaria"],"a":3},{"q":"The process of converting stagnant water into breeding grounds for mosquitoes is associated with","o":["Noise pollution","Vector-borne diseases","Industrial chemicals","Soil degradation"],"a":1},{"q":"The main role of an Environmental Health Officer (Sanitary Inspector) is to","o":["Provide immunization","Conduct sanitation inspections","Prescribe medicines","Perform laboratory tests"],"a":1},{"q":"Excessive use of chemical fertilizers and pesticides mainly leads to","o":["Air pollution","Noise pollution","Soil degradation","Ozone depletion"],"a":2},{"q":"Which of the following is a major consequence of deforestation in India?","o":["Improved groundwater recharge","Reduced greenhouse gases","Increased soil erosion","Decrease in biodiversity stability"],"a":2},{"q":"Nurses contribute to waste management in hospitals by","o":["Ignoring segregation of waste","Burning all hospital waste openly","Following Biomedical Waste Management Rules","Storing biomedical waste for long durations"],"a":2}],
        "2": [{"q":"Which of the following is the primary source of safe drinking water in rural areas of India?","o":["Oceans","Groundwater","Rainwater harvesting","Dams"],"a":1},{"q":"The per capita water requirement in India for domestic use as per norms is approximately","o":["25 liters/day","55 liters/day","100 liters/day","135 liters/day"],"a":3},{"q":"Which of the following diseases is most commonly caused by contaminated water?","o":["Tuberculosis","Cholera","Malaria","Influenza"],"a":1},{"q":"The breakpoint chlorination method is mainly used for","o":["Water storage","Water disinfection","Water transport","Water desalination"],"a":1},{"q":"Which indicator organism is used to check fecal contamination of drinking water?","o":["Streptococcus","Escherichia coli","Salmonella typhi","Vibrio cholerae"],"a":1},{"q":"The slow sand filter is also called","o":["Rapid gravity filter","Biological filter","Mechanical filter","Aeration filter"],"a":1},{"q":"Which is the most effective household water purification method recommended in community health?","o":["Boiling","Alum addition","Sedimentation","Filtration"],"a":0},{"q":"Which of the following is not a waterborne disease?","o":["Typhoid","Hepatitis A","Polio","Dengue"],"a":3},{"q":"The standard permissible limit of fluoride in drinking water in India is","o":["0.5 mg/L","1.0 mg/L","1.5 mg/L","3.0 mg/L"],"a":2},{"q":"Rainwater harvesting is primarily aimed at","o":["Preventing floods","Conserving water for future use","Reducing noise pollution","Controlling air quality"],"a":1}],
        "3": [{"q":"Which of the following is an example of a traditional environmental health hazard?","o":["Industrial waste","Poor sanitation","Vehicular emissions","Synthetic chemicals"],"a":1},{"q":"Exposure to radon gas is classified under which type of environmental health risk?","o":["Chemical risk","Biological risk","Physical risk","Social risk"],"a":2},{"q":"Which group is most vulnerable to environmental health risks?","o":["Middle-aged adults","Teenagers","Infants and elderly","Healthy workers"],"a":2},{"q":"The biological indicator of fecal contamination in water is","o":["Giardia","E. coli","Vibrio cholerae","Salmonella"],"a":1},{"q":"The Environment (Protection) Act, 1986 was enacted in response to which disaster?","o":["Chernobyl disaster","Tsunami in India","Bhopal gas tragedy","Plague outbreak in Surat"],"a":2},{"q":"The National Green Tribunal (NGT) was established under which Act?","o":["Water Act, 1974","Air Act, 1981","NGT Act, 2010","Wildlife Act, 1972"],"a":2},{"q":"Which of the following is the primary role of nurses in environmental protection?","o":["Drafting environmental laws","Conducting afforestation programs","Health education and community mobilization","Issuing pollution control certificates"],"a":2},{"q":"The Central Pollution Control Board (CPCB) functions under which ministry?","o":["Ministry of Health and Family Welfare","Ministry of Environment, Forest and Climate Change (MoEFCC)","Ministry of Agriculture","Ministry of Rural Development"],"a":1},{"q":"Which international agreement focuses on limiting global warming to below 2¬∞C?","o":["Kyoto Protocol","Montreal Protocol","Paris Agreement","Rio Declaration"],"a":2},{"q":"The ‚ÄúPolluter Pays Principle‚Äù is most directly applied by","o":["Forest Survey of India","National Green Tribunal","Zoological Survey of India","Eco-Clubs in schools"],"a":1}]
    };

    let score = 0;

    function toggleUnit(header) {
        const content = header.nextElementSibling;
        header.setAttribute('aria-expanded', header.getAttribute('aria-expanded') !== 'true');
        content.classList.toggle('active');
        const arrow = header.querySelector('span');
        if(arrow) arrow.innerText = content.classList.contains('active') ? 'üîº' : 'üîΩ';
    }

    // --- 3. OPEN RESOURCE (FIXED VIDEO + BACK BUTTON) ---
    function openResource(type, url, title) {
        // PUSH STATE: Fixes Back Button
        history.pushState({ modalOpen: true }, null, '#resource');

        const modal = document.getElementById('app-modal');
        const body = document.getElementById('modal-body');
        document.getElementById('modal-title').textContent = title;
        modal.style.display = 'flex';
        
        let finalUrl = url;
        if (url.includes('drive.google.com')) { 
            finalUrl = url.replace(/\/view.*/, '/preview').replace(/\/edit.*/, '/preview'); 
        }
        else if (url.includes('human.biodigital.com')) { 
             if (url.includes('/viewer/')) finalUrl = url.replace('/viewer/', '/widget/');
             else finalUrl = url.replace('/view', '/widget'); 
        }
        
        // --- VIDEO FIX: INCLUDES SANDBOX ATTRIBUTES ---
        body.innerHTML = `
            <iframe 
                class="iframe-res" 
                src="${finalUrl}" 
                width="100%" 
                height="100%" 
                frameborder="0"
                sandbox="allow-forms allow-scripts allow-same-origin allow-popups allow-presentation"
                allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture; fullscreen">
            </iframe>`;
    }

    // --- 4. START QUIZ (FIXED BACK BUTTON) ---
    function startQuiz(unitId) {
        // PUSH STATE: Add history entry for Quiz
        history.pushState({ modalOpen: true }, null, '#quiz');

        score = 0;
        const questions = QUIZ_DATA[unitId];
        if(!questions || questions.length === 0) { alert('No questions found.'); history.back(); return; }
        
        let html = '<div class="quiz-container"><h2 style="color:var(--brand); margin-top:0;">Unit ' + unitId + ' Quiz</h2>';
        html += '<div id="score-display" style="background:var(--brand); color:white; padding:5px 15px; border-radius:20px; display:inline-block; font-weight:700; margin-bottom:20px;">Score: 0 / ' + questions.length + '</div>';
        
        questions.forEach((q, index) => {
            html += '<div style="margin-bottom:30px; border-bottom:1px solid #eee; padding-bottom:20px;">';
            html += '<p style="font-weight:600; font-size:1.1rem; margin-bottom:15px;">' + (index + 1) + '. ' + q.q + '</p>';
            q.o.forEach((opt, optIndex) => {
                html += '<div class="quiz-option" onclick="checkAnswer(this, ' + unitId + ', ' + optIndex + ', ' + q.a + ')">' + opt + '</div>';
            });
            html += '</div>';
        });
        html += '<button class="btn-quiz" onclick="closeModal()">Close Quiz</button></div>';
        
        document.getElementById('modal-body').innerHTML = html;
        document.getElementById('modal-title').textContent = 'Unit ' + unitId + ' Quiz';
        document.getElementById('app-modal').style.display = 'flex';
    }

    function checkAnswer(element, unitId, selectedIndex, correctIndex) {
        if (element.parentElement.querySelector('.correct') || element.parentElement.querySelector('.wrong')) return;
        if (selectedIndex === correctIndex) {
            element.classList.add('correct'); score++;
        } else {
            element.classList.add('wrong'); element.parentElement.children[correctIndex + 1].classList.add('correct');
        }
        document.getElementById('score-display').textContent = 'Score: ' + score + ' / ' + QUIZ_DATA[unitId].length;
    }

    // --- 6. CLOSE MODAL (MANUAL CLICK) ---
    function closeModal() { 
        const modal = document.getElementById('app-modal');
        modal.style.display = 'none'; 
        document.getElementById('modal-body').innerHTML = ""; 
        
        // IMPORTANT: Manually go back in history if we are closing via button
        if ((history.state && history.state.modalOpen) || window.location.hash === '#resource' || window.location.hash === '#quiz') {
            history.back();
        }
    }

    // --- 7. HANDLE DEVICE BACK BUTTON ---
    window.onpopstate = function(event) {
        const modal = document.getElementById('app-modal');
        if (modal.style.display === 'flex') {
            modal.style.display = 'none';
            document.getElementById('modal-body').innerHTML = '';
        }
    };
</script>
</body>
</html>
